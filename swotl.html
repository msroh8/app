<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أداة التأمل المهني لمعلمي الحاسب - SWOT</title>
    <!-- استدعاء Tailwind CSS للتنسيق -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- استدعاء خط Cairo العربي -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- استدعاء أيقونات FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        moe: {
                            green: '#007c58', // أخضر الوزارة
                            gold: '#c5a457',  // ذهبي الوزارة
                            dark: '#1e293b',  // كحلي داكن للخلفية الخارجية
                            light: '#ffffff', // أبيض للمحتوى
                            gray: '#f3f4f6',  // رمادي فاتح للخلفيات الثانوية
                        }
                    },
                    fontFamily: {
                        sans: ['Cairo', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #1e293b; /* خلفية الصفحة داكنة */
            background-image: radial-gradient(#334155 1px, transparent 1px);
            background-size: 20px 20px;
            color: #1f2937;            
            font-family: 'Cairo', sans-serif;
        }

        /* تنسيق الحاوية الرئيسية لتكون ورقة بيضاء */
        .main-container {
            background-color: #ffffff;
            color: #1f2937;
        }

        /* تنسيقات العناصر القابلة للسحب */
        .draggable-item {
            transition: all 0.2s ease;
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            color: #374151;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        /* تنسيق خاص للعناصر داخل البنك */
        .bank-item {
            cursor: pointer !important;
        }
        .bank-item:hover {
            transform: translateY(-2px);
            border-color: #007c58;
            background-color: #f0fdf4;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .bank-item:active {
            transform: scale(0.98);
        }

        /* تنسيق خاص للعناصر داخل الجدول */
        .board-item {
            cursor: grab;
            background-color: #f8fafc;
        }
        .board-item:active {
            cursor: grabbing;
        }
        .board-item:hover {
            border-color: #c5a457;
        }
        
        .drop-zone {
            transition: background-color 0.3s, border-color 0.3s;
            background-color: #ffffff;
            border: 2px dashed #e5e7eb;
        }
        .drop-zone.drag-over {
            background-color: #f0fdf4;
            border-color: #007c58;
            border-style: dashed;
        }

        /* Tooltip Style */
        .tooltip-text {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .group:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Accordion Animation */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details[open] summary ~ * {
            animation: sweep .3s ease-in-out;
        }
        @keyframes sweep {
            0%    {opacity: 0; transform: translateY(-10px)}
            100%  {opacity: 1; transform: translateY(0)}
        }

        /* تنسيقات الطباعة (أهم جزء للتقرير) */
        @media print {
            @page { margin: 0.5cm; size: A4; }
            body { background: none !important; background-color: white !important; -webkit-print-color-adjust: exact; }
            .main-container { 
                box-shadow: none !important; 
                width: 100% !important; 
                max-width: 100% !important; 
                margin: 0 !important; 
                border-top: none !important;
            }
            .no-print { display: none !important; }
            
            /* إخفاء الخلفيات الداكنة عند الطباعة */
            header { background-color: #ffffff !important; border-bottom: 2px solid #007c58 !important; color: black !important; padding: 10px !important; }
            header h1 { color: #007c58 !important; font-size: 18pt !important; }
            header h3 { color: #c5a457 !important; border: none !important; }
            header p, header div { color: black !important; }
            header .bg-moe-green { background-color: transparent !important; color: #007c58 !important; border: 1px solid #007c58 !important; }

            /* تحسين مظهر البطاقات للطباعة */
            .card-container { border: 1px solid #ccc !important; break-inside: avoid; box-shadow: none !important; }
            .swot-header { background-color: #f9fafb !important; border-bottom: 1px solid #ccc !important; color: black !important; }
            
            /* إظهار بيانات المعلم كخطوط للكتابة */
            .teacher-input { border-bottom: 1px solid #000 !important; }
            
            /* إخفاء التلميحات والقوائم */
            .tooltip-text, details { display: none !important; } 
            
            /* إخفاء أيقونات الزينة الزائدة */
            .fa-circle-info { display: none !important; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-8 px-4">

    <!-- الحاوية الرئيسية (بيضاء ونظيفة) -->
    <div class="main-container w-full max-w-[950px] bg-white rounded-xl shadow-2xl overflow-hidden border-t-8 border-moe-green relative">
        
        <!-- الهيدر (فاتح ونظيف مع لمسات الوزارة) -->
        <header class="bg-white p-8 border-b border-gray-100 flex flex-col items-center text-center relative z-10">
            
            <div class="w-full flex justify-between items-start border-b border-gray-100 pb-4 mb-4">
                <div class="text-right">
                    <h2 class="text-moe-gold font-bold text-lg">الإدارة العامة للتعليم بالطائف</h2>
                    <p class="text-xs text-gray-500 font-semibold">إدارة الموارد البشرية - قسم شؤون المعلمين</p>
                </div>
                <div class="text-left no-print">
                    <div class="text-xs text-gray-400">التاريخ</div>
                    <div class="font-bold text-moe-green" id="currentDate"></div>
                </div>
            </div>

            <div class="z-10 w-full">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">برنامج مجتمعات تبادل المعرفة للمعلم الجديد</h1>
                <div class="inline-block bg-moe-green px-6 py-1 rounded-full text-sm font-semibold text-white mb-4 shadow-md">
                    بالاتجاه التخصصي - حاسب آلي
                </div>
                <h3 class="text-xl text-moe-gold font-semibold border-t border-gray-100 pt-4 mt-2 w-3/4 mx-auto">
                    أداة SWOT للتأمل في الممارسات المهنية
                </h3>
            </div>
            
            <!-- زخرفة بسيطة -->
            <div class="hidden md:block absolute top-0 left-0 w-32 h-32 bg-moe-green/5 rounded-br-full -z-10"></div>
            <div class="hidden md:block absolute bottom-0 right-0 w-24 h-24 bg-moe-gold/5 rounded-tl-full -z-10"></div>
        </header>

        <!-- منطقة العمل -->
        <main class="p-8 space-y-8 relative z-10">
            
            <!-- بنك العناصر (يظهر فقط على الشاشة) -->
            <div class="no-print bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-inner">
                <h3 class="text-moe-green font-bold mb-4 flex items-center gap-2 text-md border-b border-gray-200 pb-3">
                    <i class="fa-solid fa-layer-group text-moe-gold"></i>
                    بنك العناصر المقترحة (انقر للإضافة السريعة أو اسحب للبطاقات)
                </h3>

                <!-- منطقة القوائم المنسدلة -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <!-- نقاط القوة -->
                    <details class="bg-white rounded-lg border border-green-100 shadow-sm group">
                        <summary class="p-3 cursor-pointer font-bold text-green-700 flex justify-between items-center hover:bg-green-50 transition rounded-lg">
                            <span><i class="fa-solid fa-dumbbell ml-2 text-green-500"></i> نقاط القوة</span>
                            <i class="fa-solid fa-chevron-down group-open:rotate-180 transition-transform text-gray-400"></i>
                        </summary>
                        <div class="p-3 border-t border-green-50 bg-green-50/30 flex flex-wrap gap-2" id="bank-strengths"></div>
                    </details>

                    <!-- نقاط الضعف -->
                    <details class="bg-white rounded-lg border border-red-100 shadow-sm group">
                        <summary class="p-3 cursor-pointer font-bold text-red-700 flex justify-between items-center hover:bg-red-50 transition rounded-lg">
                            <span><i class="fa-solid fa-link-slash ml-2 text-red-500"></i> نقاط الضعف</span>
                            <i class="fa-solid fa-chevron-down group-open:rotate-180 transition-transform text-gray-400"></i>
                        </summary>
                        <div class="p-3 border-t border-red-50 bg-red-50/30 flex flex-wrap gap-2" id="bank-weaknesses"></div>
                    </details>

                    <!-- الفرص -->
                    <details class="bg-white rounded-lg border border-blue-100 shadow-sm group">
                        <summary class="p-3 cursor-pointer font-bold text-blue-700 flex justify-between items-center hover:bg-blue-50 transition rounded-lg">
                            <span><i class="fa-solid fa-rocket ml-2 text-blue-500"></i> الفرص</span>
                            <i class="fa-solid fa-chevron-down group-open:rotate-180 transition-transform text-gray-400"></i>
                        </summary>
                        <div class="p-3 border-t border-blue-50 bg-blue-50/30 flex flex-wrap gap-2" id="bank-opportunities"></div>
                    </details>

                    <!-- التهديدات -->
                    <details class="bg-white rounded-lg border border-yellow-100 shadow-sm group">
                        <summary class="p-3 cursor-pointer font-bold text-yellow-700 flex justify-between items-center hover:bg-yellow-50 transition rounded-lg">
                            <span><i class="fa-solid fa-triangle-exclamation ml-2 text-yellow-500"></i> التهديدات</span>
                            <i class="fa-solid fa-chevron-down group-open:rotate-180 transition-transform text-gray-400"></i>
                        </summary>
                        <div class="p-3 border-t border-yellow-50 bg-yellow-50/30 flex flex-wrap gap-2" id="bank-threats"></div>
                    </details>
                </div>

                <!-- إضافة عنصر خاص -->
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <label class="block text-xs font-bold text-gray-500 mb-2">إضافة عنصر خاص جديد:</label>
                    <div class="flex flex-col md:flex-row gap-2">
                        <input type="text" id="customInput" placeholder="اكتب العنصر هنا..." class="flex-grow p-2 bg-gray-50 border border-gray-300 rounded focus:outline-none focus:border-moe-green focus:ring-1 focus:ring-moe-green text-sm text-gray-700 transition-colors">
                        <div class="flex gap-1 justify-center">
                            <button onclick="addCustomItem('strength')" class="px-3 py-1 bg-green-100 text-green-700 hover:bg-green-200 rounded text-xs font-bold border border-green-200">قوة</button>
                            <button onclick="addCustomItem('weakness')" class="px-3 py-1 bg-red-100 text-red-700 hover:bg-red-200 rounded text-xs font-bold border border-red-200">ضعف</button>
                            <button onclick="addCustomItem('opportunity')" class="px-3 py-1 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded text-xs font-bold border border-blue-200">فرصة</button>
                            <button onclick="addCustomItem('threat')" class="px-3 py-1 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded text-xs font-bold border border-yellow-200">تهديد</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- شبكة التحليل الرباعي SWOT -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="swotGrid">
                
                <!-- نقاط القوة S -->
                <div class="card-container bg-white border border-green-200 rounded-lg shadow-sm flex flex-col h-full overflow-visible group relative hover:shadow-md transition-shadow">
                    <div class="swot-header bg-green-50 p-4 border-b border-green-100 flex justify-between items-center cursor-help rounded-t-lg relative z-20">
                        <h2 class="font-bold text-green-800 flex items-center gap-2">
                            <span class="bg-green-600 text-white w-8 h-8 rounded flex items-center justify-center font-bold text-sm shadow">S</span>
                            نقاط القوة
                        </h2>
                        <i class="fa-solid fa-circle-info text-green-300 hover:text-green-500 transition text-sm"></i>
                        <div class="tooltip-text absolute top-full left-0 right-0 mt-2 mx-4 bg-gray-800 text-xs text-white p-3 rounded shadow-xl z-50 text-right leading-relaxed">
                            <strong class="text-green-300 block mb-1">المقصود:</strong>
                            ما هي المهارات التقنية أو الاستراتيجيات التدريسية التي تميزك وتجيدها ببراعة؟
                        </div>
                    </div>
                    <div class="drop-zone p-4 flex-1 min-h-[180px] space-y-2 relative z-10" ondrop="drop(event)" ondragover="allowDrop(event)" id="strengths">
                        <p class="placeholder-text text-gray-400 text-xs text-center mt-10 pointer-events-none select-none">
                            <i class="fa-solid fa-plus block mb-2 text-xl opacity-20"></i>
                            اسحب نقاط قوتك هنا
                        </p>
                    </div>
                </div>

                <!-- نقاط الضعف W -->
                <div class="card-container bg-white border border-red-200 rounded-lg shadow-sm flex flex-col h-full overflow-visible group relative hover:shadow-md transition-shadow">
                    <div class="swot-header bg-red-50 p-4 border-b border-red-100 flex justify-between items-center cursor-help rounded-t-lg relative z-20">
                        <h2 class="font-bold text-red-800 flex items-center gap-2">
                            <span class="bg-red-600 text-white w-8 h-8 rounded flex items-center justify-center font-bold text-sm shadow">W</span>
                            نقاط الضعف
                        </h2>
                        <i class="fa-solid fa-circle-info text-red-300 hover:text-red-500 transition text-sm"></i>
                        <div class="tooltip-text absolute top-full left-0 right-0 mt-2 mx-4 bg-gray-800 text-xs text-white p-3 rounded shadow-xl z-50 text-right leading-relaxed">
                            <strong class="text-red-300 block mb-1">المقصود:</strong>
                            ما هي الجوانب التي تحتاج إلى تحسين في أدائك أو معرفتك التقنية؟
                        </div>
                    </div>
                    <div class="drop-zone p-4 flex-1 min-h-[180px] space-y-2 relative z-10" ondrop="drop(event)" ondragover="allowDrop(event)" id="weaknesses">
                        <p class="placeholder-text text-gray-400 text-xs text-center mt-10 pointer-events-none select-none">
                            <i class="fa-solid fa-plus block mb-2 text-xl opacity-20"></i>
                            اسحب التحديات الداخلية هنا
                        </p>
                    </div>
                </div>

                <!-- الفرص O -->
                <div class="card-container bg-white border border-blue-200 rounded-lg shadow-sm flex flex-col h-full overflow-visible group relative hover:shadow-md transition-shadow">
                    <div class="swot-header bg-blue-50 p-4 border-b border-blue-100 flex justify-between items-center cursor-help rounded-t-lg relative z-20">
                        <h2 class="font-bold text-blue-800 flex items-center gap-2">
                            <span class="bg-blue-600 text-white w-8 h-8 rounded flex items-center justify-center font-bold text-sm shadow">O</span>
                            الفرص
                        </h2>
                        <i class="fa-solid fa-circle-info text-blue-300 hover:text-blue-500 transition text-sm"></i>
                        <div class="tooltip-text absolute top-full left-0 right-0 mt-2 mx-4 bg-gray-800 text-xs text-white p-3 rounded shadow-xl z-50 text-right leading-relaxed">
                            <strong class="text-blue-300 block mb-1">المقصود:</strong>
                            ما هي الموارد الخارجية، المسابقات، أو التقنيات الجديدة التي يمكن استغلالها؟
                        </div>
                    </div>
                    <div class="drop-zone p-4 flex-1 min-h-[180px] space-y-2 relative z-10" ondrop="drop(event)" ondragover="allowDrop(event)" id="opportunities">
                        <p class="placeholder-text text-gray-400 text-xs text-center mt-10 pointer-events-none select-none">
                            <i class="fa-solid fa-plus block mb-2 text-xl opacity-20"></i>
                            اسحب الفرص المتاحة هنا
                        </p>
                    </div>
                </div>

                <!-- التهديدات T -->
                <div class="card-container bg-white border border-yellow-200 rounded-lg shadow-sm flex flex-col h-full overflow-visible group relative hover:shadow-md transition-shadow">
                    <div class="swot-header bg-yellow-50 p-4 border-b border-yellow-100 flex justify-between items-center cursor-help rounded-t-lg relative z-20">
                        <h2 class="font-bold text-yellow-800 flex items-center gap-2">
                            <span class="bg-yellow-500 text-white w-8 h-8 rounded flex items-center justify-center font-bold text-sm shadow">T</span>
                            التهديدات
                        </h2>
                        <i class="fa-solid fa-circle-info text-yellow-300 hover:text-yellow-600 transition text-sm"></i>
                        <div class="tooltip-text absolute top-full left-0 right-0 mt-2 mx-4 bg-gray-800 text-xs text-white p-3 rounded shadow-xl z-50 text-right leading-relaxed">
                            <strong class="text-yellow-400 block mb-1">المقصود:</strong>
                            ما هي العوائق الخارجية التي قد تعرقل عملك (مثل ضعف البنية التحتية)؟
                        </div>
                    </div>
                    <div class="drop-zone p-4 flex-1 min-h-[180px] space-y-2 relative z-10" ondrop="drop(event)" ondragover="allowDrop(event)" id="threats">
                        <p class="placeholder-text text-gray-400 text-xs text-center mt-10 pointer-events-none select-none">
                            <i class="fa-solid fa-plus block mb-2 text-xl opacity-20"></i>
                            اسحب المخاطر الخارجية هنا
                        </p>
                    </div>
                </div>

            </div>

            <!-- ملخص خطة العمل -->
            <div class="mt-8 border-t-2 border-dashed border-gray-200 pt-6">
                <h3 class="text-lg font-bold text-moe-green mb-4 border-r-4 border-moe-gold pr-3">التأمل والقرار المهني</h3>
                <textarea class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-moe-green focus:border-transparent focus:outline-none bg-gray-50 text-gray-800 min-h-[120px] text-sm leading-relaxed" placeholder="بناءً على التحليل أعلاه، ما هي خطوتك القادمة لتطوير أدائك التدريسي؟..."></textarea>
            </div>

            <!-- بيانات المعلم الشخصية -->
            <div class="teacher-data-section mt-6 p-6 bg-gray-50 border border-gray-200 rounded-lg">
                <h3 class="text-md font-bold text-moe-green mb-6 border-b border-gray-200 pb-2 flex items-center gap-2">
                    <i class="fa-solid fa-user-pen text-moe-gold"></i> بيانات المعلم
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2">اسم المعلم:</label>
                        <input type="text" class="teacher-input w-full bg-transparent border-b border-gray-400 focus:border-moe-green focus:outline-none text-gray-800 text-sm py-1 placeholder-gray-300" placeholder="الاسم الثلاثي">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2">المرحلة الدراسية:</label>
                        <input type="text" class="teacher-input w-full bg-transparent border-b border-gray-400 focus:border-moe-green focus:outline-none text-gray-800 text-sm py-1 placeholder-gray-300" placeholder="ابتدائي / متوسط / ثانوي">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2">النصاب التدريسي:</label>
                        <input type="number" class="teacher-input w-full bg-transparent border-b border-gray-400 focus:border-moe-green focus:outline-none text-gray-800 text-sm py-1 placeholder-gray-300" placeholder="عدد الحصص">
                    </div>
                </div>
            </div>

        </main>

        <!-- الفوتر والأزرار -->
        <footer class="bg-gray-50 p-6 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4 no-print relative z-10">
             <div class="text-sm font-bold text-gray-600 border-r-2 border-moe-gold pr-3">
                قائد المجتمع المهني: أ. محمد مجممي
            </div>
            <div class="flex gap-3">
                <button onclick="resetBoard()" class="px-5 py-2 text-red-500 border border-red-200 bg-white rounded-lg hover:bg-red-50 transition text-sm font-semibold shadow-sm">
                    <i class="fa-solid fa-trash-can ml-2"></i> مسح المحتوى
                </button>
                <button onclick="window.print()" class="px-6 py-2 bg-moe-green text-white rounded-lg shadow hover:bg-green-800 transition text-sm flex items-center font-bold">
                    <i class="fa-solid fa-print ml-2"></i> طباعة التقرير
                </button>
            </div>
        </footer>
        
        <!-- تمت إزالة قسم التوقيع الخاص بالطباعة بناءً على طلبك -->
        
    </div>

    <!-- كود الجافاسكربت للمنطق -->
    <script>
        // التاريخ الحالي
        document.getElementById('currentDate').innerText = new Date().toLocaleDateString('ar-SA');

        // البيانات
        const rawData = {
            strengths: [
                "مواكبة أحدث لغات البرمجة والتقنيات المعاصرة",
                "القدرة على توظيف أدوات الذكاء الاصطناعي في التعليم",
                "مهارة حل المشكلات التقنية وإدارة معامل الحاسب بفاعلية",
                "استخدام أساليب التعلم الحديثة كالتلعيب والمشاريع العملية",
                "تبسيط المفاهيم البرمجية المعقدة وربطها بالواقع",
                "تعزيز الوعي بالأمن السيبراني وأخلاقيات العالم الرقمي",
                "الشغف بالتعلم الذاتي المستمر ومتابعة الجديد",
                "القدرة على دمج التقنية مع المواد الدراسية الأخرى",
                "التركيز على الجانب التطبيقي والإنتاج الرقمي",
                "سهولة التواصل مع الطلاب وفهم اهتماماتهم التقنية"
            ],
            weaknesses: [
                "صعوبة ضبط وإدارة الصف في بيئة المعمل",
                "التركيز المفرط على الجانب التقني البحت وإغفال التربوي",
                "صعوبة تبسيط المصطلحات البرمجية للمبتدئين",
                "سوء إدارة وقت الحصة بين النظري والعملي",
                "الارتباك عند تعطل الأجهزة أو انقطاع الإنترنت",
                "الإحباط السريع من ضعف البنية التحتية",
                "رفع سقف التوقعات وعدم مراعاة الفروق الفردية",
                "صعوبة تقييم المشاريع العملية بمعايير واضحة",
                "محاولة تغطية كم هائل من المعلومات في وقت قصير"
            ],
            opportunities: [
                "تزايد الطلب على المهارات الرقمية في سوق العمل",
                "توفر أدوات الذكاء الاصطناعي المساعدة في التحضير",
                "إمكانية قيادة التحول الرقمي داخل المدرسة",
                "المشاركة في المسابقات المحلية والدولية (روبوت، برمجة)",
                "تأسيس أندية تقنية لاكتشاف الموهوبين",
                "وفرة المصادر التعليمية المفتوحة والمجانية",
                "بناء سمعة مهنية قوية بنشر المحتوى الرقمي",
                "الحصول على شهادات احترافية تقنية",
                "تقديم دورات تدريبية للمجتمع أو المعلمين"
            ],
            threats: [
                "الأعطال المفاجئة للأجهزة أو انقطاع الإنترنت",
                "الهجمات الفيروسية التي قد تهدد شبكة المدرسة",
                "إساءة استخدام الطلاب للتقنية (اختراقات، تنمر)",
                "الاعتماد الكلي للطلاب على AI (الغش التقني)",
                "نظرة الطلاب للحاسب كحصة 'لعب' فقط",
                "المخاطر الصحية المهنية (إجهاد العين، الظهر)",
                "نقص الميزانيات لصيانة المعامل",
                "مقاومة التغيير من البيئة المدرسية التقليدية"
            ]
        };

        // تهيئة البنك وتوزيع العناصر على القوائم المنسدلة
        function initIdeasBank() {
            document.getElementById('bank-strengths').innerHTML = '';
            document.getElementById('bank-weaknesses').innerHTML = '';
            document.getElementById('bank-opportunities').innerHTML = '';
            document.getElementById('bank-threats').innerHTML = '';

            rawData.strengths.forEach(text => createDraggableElement(text, document.getElementById('bank-strengths'), 'strength'));
            rawData.weaknesses.forEach(text => createDraggableElement(text, document.getElementById('bank-weaknesses'), 'weakness'));
            rawData.opportunities.forEach(text => createDraggableElement(text, document.getElementById('bank-opportunities'), 'opportunity'));
            rawData.threats.forEach(text => createDraggableElement(text, document.getElementById('bank-threats'), 'threat'));
        }

        // إنشاء عنصر قابل للسحب
        function createDraggableElement(text, parent, type) {
            const el = document.createElement('div');
            // ألوان فاتحة وحديثة للعناصر
            let borderClass = 'border-gray-200';
            let iconColor = 'text-gray-400';
            
            if(type === 'strength') { borderClass = 'border-green-200 hover:border-green-500'; iconColor = 'text-green-500'; }
            if(type === 'weakness') { borderClass = 'border-red-200 hover:border-red-500'; iconColor = 'text-red-500'; }
            if(type === 'opportunity') { borderClass = 'border-blue-200 hover:border-blue-500'; iconColor = 'text-blue-500'; }
            if(type === 'threat') { borderClass = 'border-yellow-200 hover:border-yellow-500'; iconColor = 'text-yellow-500'; }

            const isBankItem = parent.id && parent.id.startsWith('bank-');
            const itemClass = isBankItem ? 'bank-item' : 'board-item';

            el.className = `draggable-item ${itemClass} px-3 py-2 rounded-md text-sm shadow-sm flex items-start gap-2 group relative w-full mb-2 ${borderClass}`;
            el.draggable = true;
            el.id = 'drag-' + Math.random().toString(36).substr(2, 9);
            
            const icon = document.createElement('i');
            icon.className = `mt-1 text-[10px] ${iconColor} `;
            if(type === 'strength') icon.classList.add('fa-solid', 'fa-plus');
            else if(type === 'weakness') icon.classList.add('fa-solid', 'fa-minus');
            else if(type === 'opportunity') icon.classList.add('fa-solid', 'fa-arrow-trend-up');
            else if(type === 'threat') icon.classList.add('fa-solid', 'fa-triangle-exclamation');
            el.appendChild(icon);

            const contentSpan = document.createElement('span');
            contentSpan.className = 'flex-1 leading-relaxed text-gray-700 font-medium';
            contentSpan.innerText = text;
            el.appendChild(contentSpan);

            const deleteBtn = document.createElement('span');
            deleteBtn.className = 'text-red-300 cursor-pointer opacity-0 group-hover:opacity-100 transition text-xs mr-1 mt-1 hover:text-red-500';
            deleteBtn.innerHTML = '<i class="fa-solid fa-xmark"></i>';
            deleteBtn.onclick = function(e) {
                e.stopPropagation();
                el.remove();
                checkPlaceholderVisibility();
            };
            el.appendChild(deleteBtn);

            if (isBankItem) {
                el.onclick = function(e) {
                    let targetId = '';
                    if(type === 'strength') targetId = 'strengths';
                    else if(type === 'weakness') targetId = 'weaknesses';
                    else if(type === 'opportunity') targetId = 'opportunities';
                    else if(type === 'threat') targetId = 'threats';

                    if(targetId) {
                        const targetZone = document.getElementById(targetId);
                        createDraggableElement(text, targetZone, type);
                        checkPlaceholderVisibility();
                        
                        const originalBg = el.style.backgroundColor;
                        el.style.backgroundColor = '#dcfce7'; // green-100
                        setTimeout(() => {
                            el.style.backgroundColor = ''; 
                        }, 200);
                    }
                };
                el.title = "انقر للإضافة";
            }

            el.addEventListener('dragstart', drag);
            parent.appendChild(el);
        }

        // منطق السحب والإفلات
        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('drag-over');
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            document.querySelectorAll('.drop-zone').forEach(z => z.classList.remove('drag-over'));

            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.getElementById(data);
            
            let targetZone = ev.target;
            while (!targetZone.classList.contains('drop-zone') && targetZone.parentElement) {
                targetZone = targetZone.parentElement;
            }

            if (targetZone.classList.contains('drop-zone')) {
                if (draggedElement.parentElement.id && draggedElement.parentElement.id.startsWith('bank-')) {
                    const text = draggedElement.querySelector('span').innerText;
                    let type = 'strength'; 
                    if(targetZone.id === 'weaknesses') type = 'weakness';
                    if(targetZone.id === 'opportunities') type = 'opportunity';
                    if(targetZone.id === 'threats') type = 'threat';
                    createDraggableElement(text, targetZone, type);
                } else {
                    targetZone.appendChild(draggedElement);
                }
                checkPlaceholderVisibility();
            }
        }

        function addCustomItem(type) {
            const input = document.getElementById('customInput');
            const text = input.value.trim();
            if (text) {
                let targetId = 'bank-strengths';
                if(type === 'weakness') targetId = 'bank-weaknesses';
                if(type === 'opportunity') targetId = 'bank-opportunities';
                if(type === 'threat') targetId = 'bank-threats';

                const targetContainer = document.getElementById(targetId);
                createDraggableElement(text, targetContainer, type);
                targetContainer.parentElement.open = true;
                input.value = '';
            } else {
                alert('يرجى كتابة النص أولاً ثم اختيار التصنيف');
            }
        }

        function checkPlaceholderVisibility() {
            document.querySelectorAll('.drop-zone').forEach(zone => {
                const hasItems = zone.querySelectorAll('.draggable-item').length > 0;
                const placeholder = zone.querySelector('.placeholder-text');
                if (placeholder) {
                    placeholder.style.display = hasItems ? 'none' : 'block';
                }
            });
        }

        function resetBoard() {
            if(confirm('هل أنت متأكد من مسح جميع العناصر في الجدول؟')) {
                document.querySelectorAll('.drop-zone .draggable-item').forEach(el => el.remove());
                checkPlaceholderVisibility();
            }
        }

        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
        });

        // التشغيل الأولي
        initIdeasBank();
    </script>
</body>
</html>