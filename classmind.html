<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªØ·Ø¨ÙŠÙ‚ ØªØªÙŠØ¹ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­ØµØµ - Ø«Ø§Ù†ÙˆÙŠØ© Ø¯Ø§Ø± Ø§Ù„ØªÙˆØ­ÙŠØ¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
        body { font-family: 'Tajawal', sans-serif; background-color: #f3f4f6; overflow-x: hidden; }
        
        .sticky-name { position: sticky; right: 0; background: white; z-index: 20; border-left: 2px solid #e5e7eb; box-shadow: -2px 0 5px rgba(0,0,0,0.05); }
        
        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø­Ø§Ù„Ø§Øª */
        .s-0 { background-color: #f9fafb; color: #9ca3af; }
        .s-1 { background-color: #10b981 !important; color: white !important; } /* Ø£Ø®Ø¶Ø± */
        .s-2 { background-color: #f59e0b !important; color: white !important; } /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ */
        .s-3 { background-color: #ef4444 !important; color: white !important; } /* Ø£Ø­Ù…Ø± */
        .s-4 { background-color: #111827 !important; color: white !important; } /* X Ø£Ø³ÙˆØ¯ */

        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background: white; padding: 0; }
            .sticky-name { position: static !important; box-shadow: none !important; }
            table { width: 100% !important; border-collapse: collapse !important; border: 1px solid #000 !important; }
            th, td { border: 1px solid #000 !important; -webkit-print-color-adjust: exact; font-size: 12px !important; }
            .report-header { background: #1e3a8a !important; color: white !important; -webkit-print-color-adjust: exact; padding: 15px; border-radius: 5px; margin-bottom: 10px; }
        }
    </style>
</head>
<body class="pb-24">

    <div class="no-print bg-blue-900 text-white p-4 sticky top-0 z-50 shadow-lg">
        <div class="flex justify-between items-center max-w-4xl mx-auto">
            <div>
                <h1 class="text-lg font-bold">Ø«Ø§Ù†ÙˆÙŠØ© Ø¯Ø§Ø± Ø§Ù„ØªÙˆØ­ÙŠØ¯</h1>
                <p class="text-[10px] text-blue-200">Ø§Ù„ÙˆÙƒÙŠÙ„: Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø®Ø¯ÙŠØ¯ÙŠ | Ø§Ù„Ù…Ø¯ÙŠØ±: ÙÙ‡Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ</p>
            </div>
            <div class="flex gap-2">
                <button onclick="window.print()" class="bg-blue-600 px-3 py-1 rounded text-xs font-bold shadow"><i class="fas fa-file-pdf"></i> ØªØµØ¯ÙŠØ±</button>
            </div>
        </div>
        <div class="mt-3 flex gap-2">
            <input type="text" id="searchInput" onkeyup="filterTeachers()" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¹Ù„Ù…..." class="flex-1 p-2 rounded text-black text-sm outline-none">
            <select id="daySelect" class="p-2 rounded text-black text-sm font-bold">
                <option>Ø§Ù„Ø£Ø­Ø¯</option><option>Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option><option>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option><option>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option><option>Ø§Ù„Ø®Ù…ÙŠØ³</option>
            </select>
        </div>
    </div>

    <div class="no-print overflow-x-auto">
        <table class="w-full text-right border-collapse bg-white">
            <thead class="bg-gray-800 text-white text-[10px]">
                <tr>
                    <th class="p-3 sticky-name">Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…</th>
                    <th class="p-2 text-center">Ø­1</th><th class="p-2 text-center">Ø­2</th><th class="p-2 text-center">Ø­3</th>
                    <th class="p-2 text-center">Ø­4</th><th class="p-2 text-center">Ø­5</th><th class="p-2 text-center">Ø­6</th>
                    <th class="p-2 text-center">Ø­7</th><th class="p-2 text-center min-w-[100px]">Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø©</th>
                </tr>
            </thead>
            <tbody id="teacherRows">
                </tbody>
        </table>
    </div>

    <div class="hidden print:block p-4">
        <div class="report-header flex justify-between items-center mb-6">
            <div class="text-xs">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©<br>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…<br>Ø«Ø§Ù†ÙˆÙŠØ© Ø¯Ø§Ø± Ø§Ù„ØªÙˆØ­ÙŠØ¯</div>
            <div class="text-center font-bold">ØªÙ‚Ø±ÙŠØ± Ø±ØµØ¯ Ø§Ù„Ø­ØµØµ Ø§Ù„ÙŠÙˆÙ…ÙŠ<br><span id="printDate"></span></div>
            <div class="text-left text-xs">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</div>
        </div>
        <table id="printTable" class="w-full text-center border">
            </table>
        <div class="flex justify-around mt-10 text-center font-bold">
            <div>ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©<br>Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø®Ø¯ÙŠØ¯ÙŠ<br>__________</div>
            <div>Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©<br>ÙÙ‡Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ<br>__________</div>
        </div>
    </div>

    <div class="no-print fixed bottom-0 left-0 right-0 bg-white border-t p-3 flex justify-around shadow-2xl z-50">
        <button onclick="addNewTeacher()" class="flex flex-col items-center text-blue-900">
            <i class="fas fa-plus-circle text-xl"></i><span class="text-[10px] font-bold">Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù…</span>
        </button>
        <div class="flex flex-col items-center text-gray-400">
            <i class="fas fa-calendar-day text-xl text-blue-900"></i><span id="dateDisplay" class="text-[10px] font-bold text-blue-900"></span>
        </div>
        <button onclick="window.print()" class="flex flex-col items-center text-blue-900">
            <i class="fas fa-print text-xl"></i><span class="text-[10px] font-bold">Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¹Ø§Ù…</span>
        </button>
    </div>

    <script>
        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„ÙƒØ§Ù…Ù„Ø©
        let teachers = [
            "Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ", "Ø³Ø¹ÙŠØ¯ Ø§Ø­Ù…Ø¯ ÙŠØ­ÙŠÙ‰ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ", "ÙŠØ­ÙŠÙ‰ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… ÙŠØ­ÙŠÙ‰ Ø¯ØºØ±ÙŠØ±ÙŠ",
            "Ø§Ø­Ù…Ø¯ Ø¹Ø§Ø¨Ø¯ Ø§Ù„Ø±Ù‚ÙŠØ¨", "Ù…Ø´Ø§Ø±ÙŠ Ø®Ø§Ù„Ø¯ Ø±ÙŠØ­Ø§Ù† Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ", "Ø¶ÙŠÙ Ø§Ù„Ù„Ù‡ Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù†Ù…Ø±ÙŠ",
            "Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ ØµØ§ÙŠÙ„ Ø®Ù„ÙŠÙˆÙŠ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ", "Ø³Ø¹ÙˆØ¯ Ø¯Ø®ÙŠÙ„ Ø§Ù„Ù„Ù‡ Ù‡Ù„Ø§Ù„ Ø§Ù„Ù‚Ø±Ø´ÙŠ", "Ø³Ø¹ÙŠØ¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­ÙˆØªØ§Ù†ÙŠ",
            "Ø¹Ø§ØµÙ… Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ø£Ø­Ù…Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ", "Ù†Ø§ØµØ± Ø¹ÙˆØ¶ Ù…Ø¹ÙŠØ¶ Ø§Ù„Ø«Ø¨ÙŠØªÙŠ", "Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø¹Ù„ÙŠ Ø¹Ø«Ù…Ø§Ù† Ø§Ù„Ø´Ù‡Ø±ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¬Ø¹ÙŠØ¯", "Ù…Ø­Ù…Ø¯ Ù…Ù†ØµÙˆØ± Ù…Ø¬Ù…Ù…ÙŠ", "Ø±Ø§Ø¦Ø¯ Ø£Ø­Ù…Ø¯ Ø§Ù„Ø·ÙˆÙŠØ±Ù‚ÙŠ",
            "Ø¹Ù„ÙŠ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø­Ø³Ù† Ø²ÙŠØ¯ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ", "Ø·Ù„Ø§Ù„ Ù…Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø³ÙÙŠØ§Ù†ÙŠ", "ÙØ§ÙŠØ² Ø¹ÙŠØ¶Ø© Ù…Ø¹ÙŠÙˆØ¶ Ø§Ù„Ø¨Ø±Ø§Ù‚",
            "Ø§Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø«Ù…Ø§Ù„ÙŠ", "ÙÙˆØ§Ø² Ù…Ø·Ù„Ù‚ Ù…Ø¹ÙŠÙˆØ¶ Ø§Ù„Ø­ØµÙŠÙ†ÙŠ", "Ø¨Ø¯Ø± Ø³Ø¹ÙŠØ¯ Ø¹ÙˆØ¶ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ",
            "ÙÙŠØµÙ„ Ø¹Ù„ÙŠ Ù…ØºØ±Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠ", "Ù…Ø´Ø¹Ù„ ÙØ±Ø¬ Ø¬Ø§Ø± Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø¨Ø±Ø¯ÙŠ", "Ø´Ø§ÙƒØ± Ø³Ø¹Ø¯ Ø§Ù„Ø²Ø§ÙŠØ¯ÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø­Ø³Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ", "ØªØ±ÙƒÙŠ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ù‚ØµÙŠÙˆÙŠ", "Ù†Ø§ÙŠÙ Ù…Ø¹ÙŠÙˆØ¶ Ø±Ø¯Ù‡ Ø§Ù„Ø«Ø¨ÙŠØªÙŠ",
            "Ø³Ø§Ù…ÙŠ Ø³Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ø±ÙŠ", "Ù‡Ø§Ù†ÙŠ Ø®Ù„Ù Ø¬Ø¨Ø±Ø§Ù† Ø§Ù„Ù‚Ø±Ø´ÙŠ", "Ø¹ÙˆØ§Ø¶ Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø§Ù„Ø«Ø¨ÙŠØªÙŠ",
            "Ø³Ù„Ø·Ø§Ù† Ù‡Ù„Ø§Ù„ Ø§Ù„Ø«Ø¨ÙŠØªÙŠ", "Ù…Ø­Ù…Ø¯ Ø³Ø¹Ø¯ Ø¹Ø¨Ø¯Ø§Ù„ØµÙ…Ø¯ Ø§Ù„ÙˆÙ‚Ø¯Ø§Ù†ÙŠ"
        ];

        const states = [
            {l: "-", c: "s-0"}, {l: "âœ“", c: "s-1"}, {l: "10Ø¯", c: "s-2"}, {l: "10+", c: "s-3"}, {l: "X", c: "s-4"}
        ];
        
        const duties = [
            {l: "ØºÙŠØ± Ù…ÙƒÙ„Ù Ø§Ù„ÙŠÙˆÙ…", c: "bg-gray-100 text-gray-500"},
            {l: "Ù…Ù†Ø§ÙˆØ¨ âœ…", c: "bg-green-100 text-green-700 font-bold"},
            {l: "Ù…Ø´Ø±Ù ğŸ›¡ï¸", c: "bg-blue-100 text-blue-700 font-bold"}
        ];

        function init() {
            const container = document.getElementById('teacherRows');
            container.innerHTML = '';
            teachers.forEach((name, idx) => {
                let row = `<tr class="border-b">
                    <td class="p-3 sticky-name font-bold text-xs whitespace-nowrap">${name}</td>
                    ${Array(7).fill().map(() => `<td onclick="changeS(this)" class="p-1 border text-center cursor-pointer s-0 font-bold text-[10px] w-9 h-11" data-s="0">-</td>`).join('')}
                    <td class="p-1 border text-center">
                        <button onclick="changeD(this)" data-d="0" class="text-[9px] w-full py-2 rounded bg-gray-100">ØºÙŠØ± Ù…ÙƒÙ„Ù Ø§Ù„ÙŠÙˆÙ…</button>
                    </td>
                </tr>`;
                container.innerHTML += row;
            });
            let today = new Date();
            document.getElementById('dateDisplay').innerText = today.toLocaleDateString('ar-SA');
            document.getElementById('printDate').innerText = "ÙŠÙˆÙ…: " + document.getElementById('daySelect').value + " | " + today.toLocaleDateString('ar-SA');
        }

        function changeS(el) {
            let s = (parseInt(el.dataset.s) + 1) % states.length;
            el.dataset.s = s;
            el.innerText = states[s].l;
            el.className = `p-1 border text-center cursor-pointer font-bold text-[10px] w-9 h-11 ${states[s].c}`;
        }

        function changeD(btn) {
            let d = (parseInt(btn.dataset.d) + 1) % duties.length;
            btn.dataset.d = d;
            btn.innerText = duties[d].l;
            btn.className = `text-[9px] w-full py-2 rounded ${duties[d].c}`;
        }

        function filterTeachers() {
            let q = document.getElementById('searchInput').value;
            let rows = document.getElementById('teacherRows').querySelectorAll('tr');
            rows.forEach(r => {
                r.style.display = r.innerText.includes(q) ? '' : 'none';
            });
        }

        async function addNewTeacher() {
            const { value: name } = await Swal.fire({ title: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯', input: 'text', confirmButtonText: 'Ø¥Ø¶Ø§ÙØ©' });
            if (name) { teachers.unshift(name); init(); }
        }

        window.onbeforeprint = () => {
            const printTable = document.getElementById('printTable');
            printTable.innerHTML = `<tr><th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…</th><th>Ø­1</th><th>Ø­2</th><th>Ø­3</th><th>Ø­4</th><th>Ø­5</th><th>Ø­6</th><th>Ø­7</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th></tr>`;
            document.querySelectorAll('#teacherRows tr').forEach(r => {
                let cells = r.querySelectorAll('td');
                let rowHtml = `<tr>
                    <td style="text-align:right; padding:5px;">${cells[0].innerText}</td>
                    <td>${cells[1].innerText}</td><td>${cells[2].innerText}</td><td>${cells[3].innerText}</td>
                    <td>${cells[4].innerText}</td><td>${cells[5].innerText}</td><td>${cells[6].innerText}</td>
                    <td>${cells[7].innerText}</td><td>${cells[8].innerText}</td>
                </tr>`;
                printTable.innerHTML += rowHtml;
            });
        };

        init();
    </script>
</body>
</html>
