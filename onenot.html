<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (OneNote)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #8E44AD; /* OneNote Purple */
            --accent-color: #9B59B6;
            --bg-color: #ecf0f1;
            --text-color: #34495e;
            --light-gray: #bdc3c7;
            --card-bg: #ffffff;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --gold-medal: #ffd700;
            --silver-medal: #c0c0c0;
            --bronze-medal: #cd7f32;
            --assessment-bg: #f8f9fa;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            line-height: 1.8;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background-color: var(--secondary-color);
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            margin: 0;
            font-size: 2.2em;
        }

        .main-content {
            display: flex;
        }

        nav {
            width: 220px;
            background-color: #34495e;
            padding: 15px;
            color: white;
            flex-shrink: 0;
        }

        nav h3 {
            margin-top: 0;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        nav li {
            padding: 12px 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
            font-size: 1.1em;
        }

        nav li:hover, nav li.active {
            background-color: var(--secondary-color);
        }

        .content-area {
            flex-grow: 1;
            padding: 25px;
            overflow-y: auto;
            max-height: 80vh;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-top: 0;
            font-size: 1.8em;
        }
        
        h3 {
            color: var(--primary-color);
            font-size: 1.5em;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .section-header h2 {
            margin: 0;
        }

        .question-icon {
            font-size: 1.5em;
            color: var(--secondary-color);
            cursor: pointer;
            background: #f1f1f1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        .question-icon:hover {
            transform: scale(1.1);
            background-color: var(--secondary-color);
            color: white;
        }
        
        .illustration {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            display: block;
        }
        
        table.styled-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9em;
            border-radius: 5px 5px 0 0;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
        }

        .styled-table thead tr {
            background-color: var(--primary-color);
            color: #ffffff;
            text-align: right;
        }
        
        .styled-table th,
        .styled-table td {
            padding: 12px 15px;
            border: 1px solid #dddddd;
        }

        .styled-table tbody tr {
            border-bottom: 1px solid #dddddd;
        }

        .styled-table tbody tr:nth-of-type(even) {
            background-color: #f3f3f3;
        }

        .styled-table tbody tr:last-of-type {
            border-bottom: 2px solid var(--primary-color);
        }

        /* --- KWL Chart --- */
        .kwl-chart {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .kwl-column {
            background-color: var(--assessment-bg);
            padding: 15px;
            border-radius: 8px;
            border-top: 5px solid;
        }
        .kwl-column h4 {
            margin-top: 0;
            text-align: center;
        }
        .kwl-column textarea {
            width: 100%;
            height: 150px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            padding: 10px;
            box-sizing: border-box;
            resize: vertical;
        }
        #kwl-k { border-color: var(--secondary-color); }
        #kwl-w { border-color: var(--warning-color); }
        #kwl-l { border-color: var(--success-color); }

        /* --- Learning Plan --- */
        .learning-plan {
            background-color: #fdfaf4;
            border: 1px solid #f39c12;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .learning-plan h3 {
            margin-top: 0;
            color: #d35400;
        }

        /* --- Management Box --- */
        .management-box {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 250px;
            background: var(--card-bg);
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 15px;
            z-index: 1000;
        }
        
        .management-box h4 {
            margin: 0 0 10px 0;
            text-align: center;
            color: var(--primary-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .management-box h4::after {
            content: 'âˆ’';
            font-weight: bold;
            padding: 0 5px;
        }
        .management-box.collapsed h4::after {
            content: '+';
        }
        .management-box.collapsed .management-box-content {
            display: none;
        }
        .management-box-content {
            animation: fadeIn 0.5s;
        }

        .timer {
            font-size: 2em;
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--primary-color);
        }
        .timer-controls button {
            margin: 0 5px;
        }
        
        .management-box button, .btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-family: 'Tajawal', sans-serif;
        }
        .management-box button:hover, .btn:hover {
            background-color: var(--accent-color);
        }
        .btn-danger { background-color: #e74c3c; }
        .btn-danger:hover { background-color: #c0392b; }
        .btn-success { background-color: var(--success-color); }
        .btn-success:hover { background-color: #27ae60; }
        .btn-warning { background-color: var(--warning-color); }
        .btn-warning:hover { background-color: #e67e22; }

        select, input[type="text"], input[type="date"], textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid var(--light-gray);
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
        }

        #student-list {
            list-style: none;
            padding: 0;
            max-height: 150px;
            overflow-y: auto;
        }
        #student-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            border-bottom: 1px solid #eee;
        }
        #student-list input {
            border: none;
            background: transparent;
            width: 60%;
        }
        #student-list button {
            font-size: 0.8em;
            padding: 2px 5px;
        }
        
        .add-student-form {
            display: flex;
            margin-top: 10px;
        }
        .add-student-form input {
            flex-grow: 1;
            margin-bottom: 0;
            border-radius: 0 5px 5px 0;
        }
        .add-student-form button {
            border-radius: 5px 0 0 5px;
            padding: 8px;
        }

        /* --- Modal --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 25px;
            border: 1px solid #888;
            width: 80%;
            max-width: 700px;
            border-radius: 10px;
            position: relative;
            animation: slideIn 0.4s;
        }
        @keyframes slideIn {
            from { top: -100px; opacity: 0; }
            to { top: 0; opacity: 1; }
        }
        .close-btn {
            color: #aaa;
            position: absolute;
            left: 15px;
            top: 10px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-btn:hover, .close-btn:focus {
            color: black;
        }

        /* --- Story & Quizzes --- */
        .story-box {
            background-color: #fdfaf4;
            border-right: 5px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .story-box h3 {
            color: #d35400;
        }
        
        .quiz-container {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
        }
        .quiz-question {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        .quiz-options label {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            background: #e9e9e9;
            border-radius: 5px;
            cursor: pointer;
        }
        .quiz-options label:hover {
            background: #dcdcdc;
        }
        .quiz-feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }
        .quiz-feedback.correct {
            background-color: #d4edda;
            color: #155724;
        }
        .quiz-feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
        }

        /* --- Interactive Activities --- */
        .knowledge-bulletin {
            background-color: #f3e5f5; /* Light Purple */
            border-right: 5px solid var(--secondary-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .click-track-activity {
            margin: 20px 0;
        }
        .track-item {
            background-color: #f1f1f1;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .track-item:hover {
            background-color: #e0e0e0;
        }
        .track-item .content {
            display: none;
            margin-top: 10px;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }
        .track-item.active {
            background-color: var(--secondary-color);
            color: white;
        }
        .track-item.active .content {
            display: block;
        }

        .classroom-activity {
            background-color: #fef5e7;
            border-right: 5px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .classroom-activity ul {
            padding-right: 20px;
        }
        
        /* --- Formative Assessment Style --- */
        .formative-assessment {
            background-color: var(--assessment-bg);
            border-right: 5px solid var(--primary-color);
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .formative-assessment h4 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.3em;
        }
        .formative-assessment p {
            margin-bottom: 15px;
        }
        .formative-assessment .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .formative-assessment .controls select {
            flex: 1;
            margin-bottom: 0;
        }
        .formative-assessment .controls button {
            flex-shrink: 0;
        }
        
        /* --- Drag and Drop Game --- */
        #game-container {
            padding: 20px;
            background-color: #f0f0f0;
            border-radius: 8px;
        }
        #game-slots {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 10px;
            background-color: white;
            border-radius: 8px;
        }
        .game-slot {
            width: 120px;
            height: 50px;
            border: 2px dashed var(--light-gray);
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }
        #game-items {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .game-item {
            padding: 10px 15px;
            background-color: var(--secondary-color);
            color: white;
            border-radius: 5px;
            cursor: grab;
            text-align: center;
        }
        .game-item:active {
            cursor: grabbing;
        }
        .game-feedback {
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        /* --- Report --- */
        #report-page table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        #report-page th, #report-page td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: right;
        }
        #report-page th {
            background-color: var(--primary-color);
            color: white;
        }
        #report-page h3 {
             color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 5px;
            margin-top: 30px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            background-color: var(--primary-color);
            color: white;
            font-size: 0.9em;
        }
        
        /* --- Notification --- */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s, visibility 0.5s, bottom 0.5s;
        }
        .notification.show {
            opacity: 1;
            visibility: visible;
            bottom: 40px;
        }
        
        /* --- Follow-up Modal (IMPROVED) --- */
        #followup-modal .modal-header {
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        #followup-modal .modal-header h3, #followup-modal .modal-header p {
            margin: 5px 0;
        }
        #followup-table {
            width: 100%;
            border-collapse: collapse;
        }
        #followup-table th, #followup-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
            vertical-align: middle;
        }
        #followup-table th {
            background-color: #f2f2f2;
        }
        #followup-table td:first-child {
            text-align: right;
            width: 35%;
        }
        .status-cell {
            cursor: pointer;
            font-size: 1.5em;
            font-weight: bold;
            width: 15%;
        }
        .status-cell.checked { color: var(--success-color); }
        .status-cell.crossed { color: var(--accent-color); }
        
        .participation-cell {
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .behavior-cell input {
            width: 90%;
            padding: 4px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        #followup-modal .modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px solid #eee;
            font-size: 0.9em;
        }

    </style>
</head>
<body>

    <!-- Management Box -->
    <div class="management-box" id="management-box">
        <h4 id="management-box-header">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­ØµØ©</h4>
        <div class="management-box-content">
            <div class="timer" id="timer-display">00:00</div>
            <div class="timer-controls" style="text-align: center; margin-bottom: 15px;">
                <button id="start-timer">Ø¨Ø¯Ø¡</button>
                <button id="pause-timer">Ø¥ÙŠÙ‚Ø§Ù</button>
                <button id="reset-timer">Ø¥Ø¹Ø§Ø¯Ø©</button>
            </div>
            <button id="open-followup-btn" style="width: 100%; margin-bottom: 10px;">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­ØµØ©</button>
            
            <hr>

            <label for="class-select">Ø§Ù„ÙØµÙ„:</label>
            <select id="class-select">
                 <optgroup label="Ø§Ù„ÙØµÙˆÙ„">
                    <option value="302" selected>ÙØµÙ„ 302</option>
                </optgroup>
            </select>
            
            <ul id="student-list">
                <!-- Student list will be populated by JS -->
            </ul>
            <div class="add-student-form">
                <input type="text" id="new-student-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
                <button id="add-student-btn">Ø¥Ø¶Ø§ÙØ©</button>
            </div>

            <label for="strategy-select" style="margin-top: 10px;">Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªØ¯Ø±ÙŠØ³:</label>
            <select id="strategy-select">
                <option>Ø§Ù„Ø¹ØµÙ Ø§Ù„Ø°Ù‡Ù†ÙŠ</option>
                <option>Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</option>
                <option>Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ¹Ø§ÙˆÙ†ÙŠ</option>
                <option>Ø§Ù„Ù…Ù†Ø§Ù‚Ø´Ø© ÙˆØ§Ù„Ø­ÙˆØ§Ø±</option>
            </select>
        </div>
    </div>

    <div class="container">
        <header>
            <h1 id="lesson-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (OneNote)</h1>
        </header>

        <div class="main-content">
            <nav>
                <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±Ø³</h3>
                <ul id="nav-menu">
                    <li data-page="intro" class="active">Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© ÙˆØ®Ø·Ø© Ø§Ù„ØªØ¹Ù„Ù…</li>
                    <li data-page="game">Ù„Ø¹Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ©</li>
                    <li data-page="kwl">Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ¹Ù„Ù…</li>
                    <li data-page="diagnostic-quiz">ØªÙ‚ÙˆÙŠÙ… ØªØ´Ø®ÙŠØµÙŠ</li>
                    <li data-page="section1">ØªÙ†Ø¸ÙŠÙ… Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</li>
                    <li data-page="section2">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„ØµÙØ­Ø§Øª</li>
                    <li data-page="section3">Ø§Ù„Ø¹Ù…Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</li>
                    <li data-page="section4">Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ†</li>
                    <li data-page="report">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¯Ø±Ø³</li>
                </ul>
            </nav>

            <main class="content-area">
                <!-- Page 1: Introduction & Learning Plan -->
                <div id="intro-page" class="page active">
                    <div class="section-header">
                        <h2>ØªÙ…Ù‡ÙŠØ¯: Ù‚ØµØ© Ù„ÙŠÙˆÙ†Ø§Ø±Ø¯Ùˆ Ø¯Ø§ÙÙ†Ø´ÙŠ</h2>
                    </div>
                     <div class="story-box">
                        <h3>Ù‚ØµØ© Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¯Ø§ÙÙ†Ø´ÙŠ: Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ù…Ù†Ø¸Ù…</h3>
                        <p>Ù„ÙŠÙˆÙ†Ø§Ø±Ø¯Ùˆ Ø¯Ø§ÙÙ†Ø´ÙŠØŒ Ø§Ù„ÙÙ†Ø§Ù† ÙˆØ§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¹Ø¸ÙŠÙ…ØŒ Ù„Ù… ÙŠÙƒÙ† ÙŠÙ…ØªÙ„Ùƒ Ø­Ø§Ø³Ø¨Ù‹Ø§ Ø£Ùˆ ØªØ·Ø¨ÙŠÙ‚ OneNoteØŒ Ù„ÙƒÙ†Ù‡ ÙƒØ§Ù† ÙŠÙ…ØªÙ„Ùƒ Ù†Ø¸Ø§Ù…Ù‹Ø§ Ù…Ø°Ù‡Ù„Ø§Ù‹ Ù„Ø¬Ù…Ø¹ Ø£ÙÙƒØ§Ø±Ù‡ ÙˆÙ…Ù„Ø§Ø­Ø¸Ø§ØªÙ‡. ÙƒØ§Ù† ÙŠØ­Ù…Ù„ Ù…Ø¹Ù‡ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø¯ÙØ§ØªØ± ØµØºÙŠØ±Ø© ÙŠØ³Ø¬Ù„ ÙÙŠÙ‡Ø§ ÙƒÙ„ Ø´ÙŠØ¡: Ø±Ø³ÙˆÙ…Ø§Øª ØªØ´Ø±ÙŠØ­ÙŠØ©ØŒ ØªØµØ§Ù…ÙŠÙ… Ù„Ø¢Ù„Ø§Øª Ø·Ø§Ø¦Ø±Ø©ØŒ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø­ÙˆÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ù…ÙŠØ§Ù‡ØŒ ÙˆØ­ØªÙ‰ Ù‚ÙˆØ§Ø¦Ù… Ù…Ø´ØªØ±ÙŠØ§ØªÙ‡. Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙØ§ØªØ± Ù„Ù… ØªÙƒÙ† Ù…Ø¬Ø±Ø¯ Ø£ÙˆØ±Ø§Ù‚ Ù…Ø¨Ø¹Ø«Ø±Ø©ØŒ Ø¨Ù„ ÙƒØ§Ù†Øª Ù…Ù†Ø¸Ù…Ø© Ø¨Ø·Ø±ÙŠÙ‚ØªÙ‡ Ø§Ù„Ø®Ø§ØµØ©ØŒ Ø­ÙŠØ« ÙŠØ¬Ù…Ø¹ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø© Ù…Ø¹Ù‹Ø§.</p>
                        <p>ÙƒØ§Ù†Øª Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙØ§ØªØ± Ø¨Ù…Ø«Ø§Ø¨Ø© "Ø¹Ù‚Ù„Ù‡ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ"ØŒ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯ ÙŠØ¬Ù…Ø¹ ÙÙŠÙ‡ ÙƒÙ„ Ù…Ø¹Ø±ÙØªÙ‡ ÙˆØ¥Ø¨Ø¯Ø§Ø¹Ø§ØªÙ‡. Ø§Ù„ÙŠÙˆÙ…ØŒ ÙŠÙ‚ÙˆÙ… Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø«Ù„ Microsoft OneNote Ø¨Ù†ÙØ³ Ø§Ù„Ø¯ÙˆØ± ÙˆÙ„ÙƒÙ† Ø¨Ø´ÙƒÙ„ Ø±Ù‚Ù…ÙŠ ÙˆØ£ÙƒØ«Ø± Ù‚ÙˆØ©. ÙŠØ³Ù…Ø­ Ù„Ù†Ø§ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù„ÙƒÙ„ Ø¬Ø§Ù†Ø¨ Ù…Ù† Ø¬ÙˆØ§Ù†Ø¨ Ø­ÙŠØ§ØªÙ†Ø§ØŒ ÙˆØªÙ‚Ø³ÙŠÙ…Ù‡Ø§ Ø¥Ù„Ù‰ Ø£Ù‚Ø³Ø§Ù… ÙˆØµÙØ­Ø§ØªØŒ ØªÙ…Ø§Ù…Ù‹Ø§ ÙƒÙ…Ø§ ÙƒØ§Ù† ÙŠÙØ¹Ù„ Ø¯Ø§ÙÙ†Ø´ÙŠØŒ ÙˆÙ„ÙƒÙ† Ù…Ø¹ Ù…ÙŠØ²Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ù‡Ø§Ø¦Ù„Ø©: Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ ÙˆØ§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙ†Ø§ Ù…Ù† Ø£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù….</p>
                    </div>

                    <div id="learning-plan-section" class="learning-plan">
                        <h3>Ø®Ø·Ø© Ø§Ù„ØªØ¹Ù„Ù… Ù„Ù„Ø·Ø§Ù„Ø¨Ø© ÙˆÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</h3>
                        <h4>Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ¹Ù„Ù…:</h4>
                        <ul>
                            <li>Ø£Ù† ØªÙ…ÙŠØ² Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø¨ÙŠÙ† Ù…ÙØ§Ù‡ÙŠÙ… Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŒ Ø§Ù„Ù‚Ø³Ù…ØŒ ÙˆØ§Ù„ØµÙØ­Ø©.</li>
                            <li>Ø£Ù† ØªÙ†Ø´Ø¦ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¬Ø¯ÙŠØ¯ ÙˆØªØ¶ÙŠÙ Ø¥Ù„ÙŠÙ‡ Ø£Ù‚Ø³Ø§Ù…Ù‹Ø§ ÙˆØµÙØ­Ø§Øª.</li>
                            <li>Ø£Ù† ØªØ´Ø±Ø­ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© ÙØ§Ø¦Ø¯Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… OneDrive Ù„Ø­ÙØ¸ ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø¯ÙØ§ØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª.</li>
                            <li>Ø£Ù† ØªØ·Ø¨Ù‚ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø¹Ù…Ù„ÙŠØ§Ù‹ ÙƒÙŠÙÙŠØ© Ù…Ø´Ø§Ø±ÙƒØ© Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø¹ Ø²Ù…ÙŠÙ„Ø§ØªÙ‡Ø§ Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ­Ø±ÙŠØ±.</li>
                        </ul>
                        <h4>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø³:</h4>
                        <ol>
                            <li><strong>ØªÙ†Ø¸ÙŠÙ… Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ÙÙ‡Ù… Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ OneNote.</li>
                            <li><strong>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„ØµÙØ­Ø§Øª:</strong> ØªØ¹Ù„Ù… Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØªØ³Ù…ÙŠØ© ÙˆØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰.</li>
                            <li><strong>Ø§Ù„Ø¹Ù…Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª:</strong> Ø§Ø³ØªÙƒØ´Ø§Ù ÙƒÙŠÙÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù† Ø£ÙŠ Ù…ÙƒØ§Ù† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… OneDrive.</li>
                            <li><strong>Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ†:</strong> ØªØ¹Ù„Ù… ÙƒÙŠÙÙŠØ© Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø¬Ù…Ø§Ø¹ÙŠ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª.</li>
                        </ol>
                        <button class="btn" onclick="exportLearningPlan()">ØªØµØ¯ÙŠØ± Ø§Ù„Ø®Ø·Ø©</button>
                    </div>
                </div>
                
                <!-- Game Page -->
                <div id="game-page" class="page">
                    <h2>Ù„Ø¹Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ©: Ø±ØªØ¨ Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ…</h2>
                    <p>Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù„ØªÙ†Ø¸ÙŠÙ… Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª.</p>
                    <div id="game-container">
                        <div id="game-slots">
                            <div class="game-slot" data-order="1">Ø§Ù„Ø®Ø·ÙˆØ© 1</div>
                            <div class="game-slot" data-order="2">Ø§Ù„Ø®Ø·ÙˆØ© 2</div>
                            <div class="game-slot" data-order="3">Ø§Ù„Ø®Ø·ÙˆØ© 3</div>
                        </div>
                        <div id="game-items">
                            <div class="game-item" draggable="true" data-item="3">Ø£Ø¶Ù ØµÙØ­Ø© "Ø¯Ø±Ø³ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª"</div>
                            <div class="game-item" draggable="true" data-item="1">Ø£Ù†Ø´Ø¦ Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª "Ø§Ù„Ù…Ø¯Ø±Ø³Ø©"</div>
                            <div class="game-item" draggable="true" data-item="2">Ø£Ù†Ø´Ø¦ Ù‚Ø³Ù… "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª"</div>
                        </div>
                        <p class="game-feedback" id="game-feedback-text"></p>
                    </div>
                </div>

                <!-- KWL Page -->
                <div id="kwl-page" class="page">
                    <h2>Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ¹Ù„Ù… (KWL)</h2>
                    <p>Ù‚Ø¨Ù„ Ø£Ù† Ù†Ø¨Ø¯Ø£ØŒ Ø´Ø§Ø±ÙƒÙŠÙ†Ø§ Ù…Ø§ ØªØ¹Ø±ÙÙŠÙ†Ù‡ Ø¨Ø§Ù„ÙØ¹Ù„ ÙˆÙ…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ÙŠÙ† Ø£Ù† ØªØªØ¹Ù„Ù…ÙŠ Ø¹Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©.</p>
                    <div class="kwl-chart">
                        <div class="kwl-column" id="kwl-k">
                            <h4>Ù…Ø§Ø°Ø§ Ø£Ø¹Ø±ÙØŸ (Know)</h4>
                            <textarea id="kwl-k-input" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù‡Ù†Ø§ Ù…Ø§ ØªØ¹Ø±ÙÙŠÙ†Ù‡ Ù…Ø³Ø¨Ù‚Ù‹Ø§ Ø¹Ù† Ø¨Ø±Ø§Ù…Ø¬ ØªØ¯ÙˆÙŠÙ† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea>
                        </div>
                        <div class="kwl-column" id="kwl-w">
                            <h4>Ù…Ø§Ø°Ø§ Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£ØªØ¹Ù„Ù…ØŸ (Want)</h4>
                            <textarea id="kwl-w-input" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù‡Ù†Ø§ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ Ù„Ø¯ÙŠÙƒ Ø­ÙˆÙ„ OneNote Ø£Ùˆ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea>
                        </div>
                        <div class="kwl-column" id="kwl-l">
                            <h4>Ù…Ø§Ø°Ø§ ØªØ¹Ù„Ù…ØªØŸ (Learned)</h4>
                            <textarea id="kwl-l-input" placeholder="ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯Ø±Ø³ØŒ Ø¹ÙˆØ¯ÙŠ Ø¥Ù„Ù‰ Ù‡Ù†Ø§ ÙˆØ§ÙƒØªØ¨ÙŠ Ø£Ù‡Ù… Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„ØªÙŠ ØªØ¹Ù„Ù…ØªÙŠÙ‡Ø§..."></textarea>
                        </div>
                    </div>
                     <div class="formative-assessment">
                        <h4>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø£ÙÙƒØ§Ø±</h4>
                        <p>Ø¨Ø¹Ø¯ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚Ù„ÙŠÙ† Ø§Ù„Ø£ÙˆÙ„ ÙˆØ§Ù„Ø«Ø§Ù†ÙŠØŒ Ø§Ø®ØªØ±ÙŠ Ø·Ø§Ù„Ø¨Ø© Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø£ÙÙƒØ§Ø±Ù‡Ø§ Ù…Ø¹ Ø§Ù„ÙØµÙ„.</p>
                        <div class="controls">
                            <select id="fa-kwl-student"></select>
                            <button class="btn" onclick="submitFA('fa-kwl', 'Ù…Ø´Ø§Ø±ÙƒØ© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ¹Ù„Ù…', true)">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©</button>
                        </div>
                    </div>
                </div>

                <!-- Page 2: Diagnostic Quiz -->
                <div id="diagnostic-quiz-page" class="page">
                    <h2>ØªÙ‚ÙˆÙŠÙ… ØªØ´Ø®ÙŠØµÙŠ</h2>
                    <p>Ø£Ø¬ÙŠØ¨ÙŠ Ø¹Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù‚ÙŠØ§Ø³ Ù…Ø¹Ø±ÙØªÙƒ Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠØ© Ø¨Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹.</p>
                    <div class="quiz-container" id="diag-quiz1">
                        <p class="quiz-question" data-question-text="1. Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù‡Ø±Ù…ÙŠ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„ØªÙ†Ø¸ÙŠÙ… ÙÙŠ OneNoteØŸ">1. Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù‡Ø±Ù…ÙŠ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„ØªÙ†Ø¸ÙŠÙ… ÙÙŠ OneNoteØŸ</p>
                        <div class="quiz-options">
                            <label><input type="radio" name="q1" value="a"> ØµÙØ­Ø§Øª > Ø£Ù‚Ø³Ø§Ù… > Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                            <label><input type="radio" name="q1" value="b"> Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª > Ø£Ù‚Ø³Ø§Ù… > ØµÙØ­Ø§Øª</label>
                            <label><input type="radio" name="q1" value="c"> Ø£Ù‚Ø³Ø§Ù… > Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª > ØµÙØ­Ø§Øª</label>
                        </div>
                        <button class="btn" onclick="checkAnswer('diag-quiz1', 'b', 'q1')">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
                        <div class="quiz-feedback"></div>
                    </div>
                    <div class="quiz-container" id="diag-quiz2">
                        <p class="quiz-question" data-question-text="2. Ù‡Ù„ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± 'Ø­ÙØ¸' Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ…Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ OneNoteØŸ">2. Ù‡Ù„ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø­ÙØ¸" Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ…Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ OneNoteØŸ</p>
                        <div class="quiz-options">
                            <label><input type="radio" name="q2" value="a"> Ù†Ø¹Ù…ØŒ ÙŠØ¬Ø¨ Ø§Ù„Ø­ÙØ¸ ÙŠØ¯ÙˆÙŠÙ‹Ø§.</label>
                            <label><input type="radio" name="q2" value="b"> Ù„Ø§ØŒ ÙŠÙ‚ÙˆÙ… OneNote Ø¨Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ§Ù„Ù…Ø³ØªÙ…Ø±.</label>
                        </div>
                        <button class="btn" onclick="checkAnswer('diag-quiz2', 'b', 'q2')">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
                        <div class="quiz-feedback"></div>
                    </div>
                    <div class="quiz-container" id="diag-quiz3">
                        <p class="quiz-question" data-question-text="3. Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ù† Ø­ÙØ¸ Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø¹Ù„Ù‰ OneDriveØŸ">3. Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ù† Ø­ÙØ¸ Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø¹Ù„Ù‰ OneDriveØŸ</p>
                        <div class="quiz-options">
                            <label><input type="radio" name="q3" value="a"> Ø¬Ø¹Ù„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø£ÙƒØ¨Ø± Ø­Ø¬Ù…Ù‹Ø§.</label>
                            <label><input type="radio" name="q3" value="b"> Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ù…Ù† Ø£ÙŠ Ø¬Ù‡Ø§Ø² ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡Ø§ Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†.</label>
                            <label><input type="radio" name="q3" value="c"> ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª.</label>
                        </div>
                        <button class="btn" onclick="checkAnswer('diag-quiz3', 'b', 'q3')">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
                        <div class="quiz-feedback"></div>
                    </div>
                </div>

                <!-- Page 3: Section 1 -->
                <div id="section1-page" class="page">
                    <div class="section-header">
                        <div class="question-icon" onclick="openQuestionModal('Ù„Ù…Ø§Ø°Ø§ Ù…Ù† Ø§Ù„Ù…ÙÙŠØ¯ ÙØµÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© Ø§Ù„Ù…Ø®ØªÙ„ÙØ© ÙÙŠ Ø¯ÙØ§ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù†ÙØµÙ„Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ÙˆØ¶Ø¹Ù‡Ø§ Ø¬Ù…ÙŠØ¹Ù‹Ø§ ÙÙŠ Ø¯ÙØªØ± ÙˆØ§Ø­Ø¯ ÙƒØ¨ÙŠØ±ØŸ', 'section1')">ØŸ</div>
                        <h2>ØªÙ†Ø¸ÙŠÙ… Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h2>
                    </div>
                    <p>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª ÙˆÙ† Ù†ÙˆØª (Microsoft OneNote) Ù‡Ùˆ Ø¨Ù…Ø«Ø§Ø¨Ø© Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø±Ù‚Ù…ÙŠ ÙŠÙˆÙØ± Ù„Ùƒ Ù…ÙƒØ§Ù†Ù‹Ø§ ÙˆØ§Ø­Ø¯Ù‹Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ÙÙŠÙ‡ Ø¬Ù…Ø¹ ÙƒÙ„ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ.</p>
                    
                    <h3>Ù‡ÙŠÙƒÙ„ÙŠØ© Ø§Ù„ØªÙ†Ø¸ÙŠÙ…</h3>
                    <p>Ù…Ù† Ø§Ù„Ø³Ù‡Ù„ Ø¬Ø¯Ù‹Ø§ ØªÙ†Ø¸ÙŠÙ… Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø¥Ø°Ø§ ØªØ¹Ø§Ù…Ù„Øª Ù…Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙØªØ± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙƒØ£Ù†Ù‡ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø¯ÙØ§ØªØ±Ùƒ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©:</p>
                    
                    <svg class="illustration" viewBox="0 0 500 200" xmlns="http://www.w3.org/2000/svg">
                        <style>.label-onenote { font-family: 'Tajawal', sans-serif; font-size: 14px; text-anchor: middle; }</style>
                        <!-- Notebooks -->
                        <rect x="20" y="50" width="120" height="100" fill="#f3e5f5" stroke="#8E44AD" rx="5"/>
                        <text x="80" y="105" class="label-onenote">Ø¯ÙØ§ØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</text>
                        <!-- Sections -->
                        <rect x="190" y="20" width="120" height="40" fill="#e8def0" stroke="#8E44AD" rx="5"/>
                        <text x="250" y="45" class="label-onenote">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</text>
                        <!-- Pages -->
                        <rect x="360" y="50" width="120" height="100" fill="#f9f6fb" stroke="#8E44AD" rx="5"/>
                        <text x="420" y="105" class="label-onenote">Ø§Ù„ØµÙØ­Ø§Øª</text>

                        <path d="M145 100 H 185" stroke="#8E44AD" stroke-width="2" marker-end="url(#arrowhead-cycle)"/>
                        <path d="M315 40 Q 340 70, 355 90" stroke="#8E44AD" stroke-width="2" marker-end="url(#arrowhead-cycle)" fill="none"/>
                    </svg>

                    <div class="formative-assessment" id="fa1">
                        <h4>Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…: Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…ÙØªÙˆØ­</h4>
                        <p>ØªØ®ÙŠÙ„ÙŠ Ø£Ù†Ùƒ Ø·Ø§Ù„Ø¨Ø© Ø¬Ø§Ù…Ø¹ÙŠØ© ØªØ¯Ø±Ø³ÙŠÙ† ØªØ®ØµØµÙŠÙ† Ù…Ø®ØªÙ„ÙÙŠÙ† (Ù…Ø«Ù„ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© ÙˆØ§Ù„Ø£Ø¯Ø¨). ÙƒÙŠÙ Ø³ØªÙ‚ÙˆÙ…ÙŠÙ† Ø¨ØªÙ†Ø¸ÙŠÙ… Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ ÙˆØ¯Ø±Ø§Ø³ØªÙƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡ÙŠÙƒÙ„ÙŠØ© OneNote (Ø¯ÙØ§ØªØ±ØŒ Ø£Ù‚Ø³Ø§Ù…ØŒ ØµÙØ­Ø§Øª)ØŸ</p>
                        <textarea id="fa1-response" rows="4" placeholder="Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª... Ø«Ù… Ø£Ù‚Ø³Ø§Ù…... Ø«Ù… ØµÙØ­Ø§Øª..."></textarea>
                        <div class="controls">
                            <select id="fa1-student"></select>
                            <button class="btn" onclick="submitFA('fa1', 'Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…ÙØªÙˆØ­')">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
                        </div>
                    </div>
                </div>
                
                <!-- Page 4: Section 2 -->
                <div id="section2-page" class="page">
                    <div class="section-header">
                         <div class="question-icon" onclick="openQuestionModal('Ù…Ø§ Ù‡ÙŠ ÙØ§Ø¦Ø¯Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¯Ø§Ø®Ù„ Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ØŸ Ø£Ø¹Ø·ÙŠ Ù…Ø«Ø§Ù„Ø§Ù‹ Ù…Ù† Ù…Ø§Ø¯Ø© Ø¯Ø±Ø§Ø³ÙŠØ©.', 'section2')">ØŸ</div>
                        <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„ØµÙØ­Ø§Øª</h2>
                    </div>
                    <p>Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚Ø³ÙŠÙ…Ù‡ Ø¥Ù„Ù‰ Ø£Ù‚Ø³Ø§Ù… (Ù…Ø«Ù„ Ø§Ù„ÙØµÙˆÙ„ ÙÙŠ Ø§Ù„ÙƒØªØ§Ø¨)ØŒ ÙˆÙƒÙ„ Ù‚Ø³Ù… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØµÙØ­Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Ù…Ø«Ù„ Ø§Ù„Ø¯Ø±ÙˆØ³).</p>
                    
                    <h3>Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Sections) ÙˆØ§Ù„ØµÙØ­Ø§Øª (Pages)</h3>
                    <p>Ù„Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ØŒ Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø²Ø± "+ Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø·Ø¹". Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ù…ÙŠØªÙ‡ØŒ Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„ÙŠÙ‡ Ø¨Ø²Ø± Ø§Ù„ÙØ£Ø±Ø© Ø§Ù„Ø£ÙŠÙ…Ù†. ÙˆØ¨Ø§Ù„Ù…Ø«Ù„ØŒ Ù„Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯ØŒ Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø²Ø± "+ Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø©".</p>

                    <div class="classroom-activity">
                        <h4>Ù†Ø´Ø§Ø· ØµÙÙŠ Ø¨Ø³ÙŠØ·: ØªÙ†Ø¸ÙŠÙ… Ù…Ø§Ø¯Ø© Ø¯Ø±Ø§Ø³ÙŠØ©</h4>
                        <p>Ø§Ø·Ù„Ø¨ÙŠ Ù…Ù† ÙƒÙ„ Ø·Ø§Ù„Ø¨Ø© (Ø£Ùˆ ÙƒÙ„ Ù…Ø¬Ù…ÙˆØ¹Ø©) Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ø¯Ø±Ø§Ø³ÙŠØ©. Ø¹Ù„Ù‰ ÙˆØ±Ù‚Ø©ØŒ Ø§Ø·Ù„Ø¨ÙŠ Ù…Ù†Ù‡Ù† ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ù…Ø«Ø§Ù„: "Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ"). Ø«Ù…ØŒ ÙƒØªØ§Ø¨Ø© 3 Ø£Ù‚Ø³Ø§Ù… (Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§ØªØŒ Ø§Ù„Ø¹Ù„ÙˆÙ…ØŒ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©). ÙˆØ£Ø®ÙŠØ±Ù‹Ø§ØŒ ÙƒØªØ§Ø¨Ø© ØµÙØ­ØªÙŠÙ† ØªØ­Øª ÙƒÙ„ Ù‚Ø³Ù… (Ù…Ø«Ø§Ù„: ØªØ­Øª "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª"ØŒ ÙŠÙ…ÙƒÙ† ÙˆØ¶Ø¹ ØµÙØ­Ø© "Ø§Ù„Ø¬Ø¨Ø±" ÙˆØµÙØ­Ø© "Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©").</p>
                    </div>
                </div>
                
                <!-- Page 5: Section 3 -->
                <div id="section3-page" class="page">
                    <div class="section-header">
                         <div class="question-icon" onclick="openQuestionModal('Ù…Ø§ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¬Ø¯ÙŠØ¯ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù„Ù‰ OneDrive ÙˆØ¨ÙŠÙ† ØªØ­Ù…ÙŠÙ„ Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ù…Ù† Ø¬Ù‡Ø§Ø²ÙƒØŸ', 'section3')">ØŸ</div>
                        <h2>Ø§Ù„Ø¹Ù…Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</h2>
                    </div>
                    <p>Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ù…Ù† Ø£ÙŠ Ù…ÙƒØ§Ù†ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… OneDriveØŒ ÙˆÙ‡ÙŠ Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ Ù…Ù† Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª. ÙŠØªÙ… Ø­ÙØ¸ Ø¯ÙØ§ØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù‡Ù†Ø§ÙƒØŒ Ù…Ù…Ø§ ÙŠØªÙŠØ­ Ù„Ùƒ ÙØªØ­Ù‡Ø§ Ù…Ù† Ø£ÙŠ Ù…ØªØµÙØ­ ÙˆÙŠØ¨ Ø£Ùˆ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ OneNote Ø¹Ù„Ù‰ Ø£ÙŠ Ø¬Ù‡Ø§Ø².</p>
                    
                    <div class="formative-assessment" id="fa2">
                        <h4>Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…: Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù…Ù‚ØµÙˆØ¯</h4>
                        <p>Ø§Ù‚Ø±Ø£ÙŠ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©: "Ø¨Ù…Ø§ Ø£Ù† OneNote ÙŠØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ØŒ ÙÙ„Ø§ Ø¯Ø§Ø¹ÙŠ Ù„Ù„Ù‚Ù„Ù‚ Ø¨Ø´Ø£Ù† Ø­ÙØ¸ Ø¹Ù…Ù„ÙŠ Ø¹Ù„Ù‰ OneDriveØŒ Ø­ÙŠØ« Ø³ØªØªÙ… Ù…Ø²Ø§Ù…Ù†ØªÙ‡ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… ÙŠÙƒÙ† Ø¬Ù‡Ø§Ø²ÙŠ Ù…ØªØµÙ„Ø§Ù‹ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª". Ø­Ø¯Ø¯ÙŠ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© ÙˆØµØ­Ø­ÙŠÙ‡.</p>
                        <textarea id="fa2-response" rows="3" placeholder="Ø§Ù„Ø®Ø·Ø£ Ù‡Ùˆ... ÙˆØ§Ù„ØªØµØ­ÙŠØ­ Ù‡Ùˆ..."></textarea>
                        <div class="controls">
                            <select id="fa2-student"></select>
                            <button class="btn" onclick="submitFA('fa2', 'Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù…Ù‚ØµÙˆØ¯')">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
                        </div>
                    </div>
                </div>
                
                <!-- Page 6: Section 4 -->
                <div id="section4-page" class="page">
                    <div class="section-header">
                         <div class="question-icon" onclick="openQuestionModal('Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø®ÙŠØ§Ø± "Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ­Ø±ÙŠØ±" (Allow editing) Ø¹Ù†Ø¯ Ù…Ø´Ø§Ø±ÙƒØ© Ø¯ÙØªØ± Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŸ ÙˆÙ…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© Ø¥Ø°Ø§ Ù‚Ù…Øª Ø¨ØªÙ…ÙƒÙŠÙ† Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø± Ù…Ø¹ Ø´Ø®Øµ Ù„Ø§ ØªØ«Ù‚ÙŠÙ† Ø¨Ù‡ØŸ', 'section4')">ØŸ</div>
                        <h2>Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ†</h2>
                    </div>
                    <p>Ø¥Ø­Ø¯Ù‰ Ø£Ù‚ÙˆÙ‰ Ù…ÙŠØ²Ø§Øª OneNote Ù‡ÙŠ Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ù…Ø´Ø§Ø±ÙƒØ© Ø¯ÙØ§ØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ† Ø¹Ù„ÙŠÙ‡Ø§ ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª. Ù‡Ø°Ø§ ÙŠØ¬Ø¹Ù„Ù‡Ø§ Ø£Ø¯Ø§Ø© Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© ÙˆØ§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©.</p>
                    <p>ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø´Ø®Ø§Øµ ØªØ­Ø±ÙŠØ± Ù†ÙØ³ Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚ØªØŒ ÙˆØ³ØªØ¸Ù‡Ø± Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØªÙŠ ÙŠØ¬Ø±ÙŠÙ‡Ø§ ÙƒÙ„ Ø´Ø®Øµ Ù„Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ø´ÙƒÙ„ ÙÙˆØ±ÙŠ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§.</p>

                    <div class="formative-assessment" id="fa3">
                        <h4>Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…: ØªØ°ÙƒØ±Ø© Ø§Ù„Ø®Ø±ÙˆØ¬</h4>
                        <p>Ø§ÙƒØªØ¨ÙŠ Ø´ÙŠØ¦Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹ Ù…Ù‡Ù…Ø§Ù‹ ØªØ¹Ù„Ù…ØªÙŠÙ‡ Ø¹Ù† Ù…Ø´Ø§Ø±ÙƒØ© Ø¯ÙØ§ØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŒ ÙˆØ³Ø¤Ø§Ù„Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹ Ù„Ø§ ÙŠØ²Ø§Ù„ Ù„Ø¯ÙŠÙƒ Ø­ÙˆÙ„ Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ÙÙŠ OneNote.</p>
                        <textarea id="fa3-response" rows="4" placeholder="ØªØ¹Ù„Ù…Øª Ø£Ù†... &#10;Ø³Ø¤Ø§Ù„ÙŠ Ù‡Ùˆ..."></textarea>
                        <div class="controls">
                            <select id="fa3-student"></select>
                            <button class="btn" onclick="submitFA('fa3', 'ØªØ°ÙƒØ±Ø© Ø§Ù„Ø®Ø±ÙˆØ¬')">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
                        </div>
                    </div>
                </div>

                <!-- Page 7: Report -->
                <div id="report-page" class="page">
                    <h2>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù…ÙØµÙ„</h2>
                    <div id="report-content">
                        <!-- Report content will be dynamically generated by JS -->
                    </div>
                    <button class="btn" onclick="exportReport()">ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙƒÙ…Ù„Ù HTML</button>
                </div>
            </main>
        </div>
        
        <footer>
            ØªØµÙ…ÙŠÙ… Ù…Ø¹Ù„Ù…Ø© Ø§Ù„Ù…Ù‚Ø±Ø±: Ø£Ù…Ù„ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ
        </footer>
    </div>

    <!-- Modals -->
    <div id="question-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('question-modal')">&times;</span>
            <h3 id="modal-question-text"></h3>
            <label for="modal-student-select">Ø§Ø®ØªØ±ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨Ø©:</label>
            <select id="modal-student-select"></select>
            <p>Ø§Ù…Ù†Ø­ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ù…ÙŠØ¯Ø§Ù„ÙŠØ©:</p>
            <div>
                <button class="btn" style="background-color: var(--gold-medal);" onclick="awardMedal('gold')">ğŸ¥‡ Ø°Ù‡Ø¨ÙŠØ©</button>
                <button class="btn" style="background-color: var(--silver-medal);" onclick="awardMedal('silver')">ğŸ¥ˆ ÙØ¶ÙŠØ©</button>
                <button class="btn" style="background-color: var(--bronze-medal);" onclick="awardMedal('bronze')">ğŸ¥‰ Ø¨Ø±ÙˆÙ†Ø²ÙŠØ©</button>
            </div>
        </div>
    </div>

    <div id="followup-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('followup-modal')">&times;</span>
            <div class="modal-header">
                <h3>ÙƒØ´Ù Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­ØµØ©</h3>
                <p><strong>Ø§Ù„Ø¯Ø±Ø³:</strong> <span id="followup-lesson-title"></span></p>
                <p><strong>Ø§Ù„ØµÙ:</strong> <span id="followup-class-name"></span> | <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> <span id="followup-date"></span></p>
            </div>
            <div class="modal-body">
                <table id="followup-table">
                    <thead>
                        <tr>
                            <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th>
                            <th>Ø§Ù„Ø­Ø¶ÙˆØ±</th>
                            <th>Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©</th>
                            <th>Ø§Ù„Ø³Ù„ÙˆÙƒ (Ù…Ù„Ø§Ø­Ø¸Ø§Øª)</th>
                        </tr>
                    </thead>
                    <tbody id="followup-table-body"></tbody>
                </table>
            </div>
            <div class="modal-footer">
               
                <button class="btn" id="export-followup-btn">ØªØµØ¯ÙŠØ± ÙƒØ´Ù Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification"></div>


    <script>
        // --- STATE MANAGEMENT ---
        const appState = {
            currentPage: 'intro',
            currentClass: '302', // Default class
            students: {},
            medals: [],
            followup: {},
            formativeAssessments: {},
            diagnosticQuizResults: {},
            interactions: [],
            kwl: { k: '', w: '', l: '' },
            classActivity: {
                organizationMethod: 'Ù…Ø¬Ù…ÙˆØ¹Ø§Øª',
                groups: []
            },
            timer: {
                interval: null,
                seconds: 0,
                isRunning: false
            },
            draggedItem: null
        };

        const masterStudentLists = {
            "302": [
                "Ø§Ø¨Ø±Ø§Ø± Ù…Ø¹ÙŠØ¶ Ø¹ÙŠØ¶Ù‡ Ø§Ù„Ø«Ù‚ÙÙŠ", "Ø£Ø±ÙŠØ§Ù Ø±Ø¯Ø§Ø¯ Ø¨Ù† Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø¨Ù† Ù…Ø­Ù…ÙˆØ¯ Ø§Ù„Ø³Ø§Ø¹Ø¯ÙŠ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ", "Ø£Ø³Ù…Ø§Ø¡ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­ÙŠÙ… Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø­Ø³Ù† Ø§Ù„Ø±ÙŠØ­Ø§Ù†ÙŠ", "Ø§Ù„Ø¨ØªÙˆÙ„ Ø¹Ø§Ø¯Ù„ Ø¨Ø®ÙŠØª Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ",
                "Ø§ÙŠÙ„Ø§Ù Ø¨Ù†Øª Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¨Ù† Ø­Ø³Ù† Ø¹ÙˆØ§Ø¬ÙŠ", "Ø¨ÙŠØ§Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø­Ù…Ø¯ÙŠ Ø§Ù„Ø³ÙˆØ§Ø·", "Ø¬Ù…Ø§Ù†Ù‡ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø³Ø§Ù„Ù… Ø¨Ø§Ø¬Ø¨ÙŠØ±", "Ø­Ù†Ø§Ù† Ø­Ø¶Ø±Øª Ù…ÛŒØ± Ù…Ø­Ù…Ø¯ Ø§ÙƒØ¨Ø±", "Ø¯Ø§Ø±ÙŠÙ† ÙÙ‡Ø¯ Ø¨Ù† Ø¹Ø·ÙŠÙ‡ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù„Ùƒ",
                "Ø±ØºØ¯ ÙÙŠØ¶Ø§Ù„Ø±Ø­Ù…Ù† Ø¹Ø¨Ø¯ Ø§Ù„ØºÙØ§Ø± Ù…Ø¸Ù‡Ø±", "Ø±ÙØ§ Ø¨Ù†Øª Ù…ØªØ¹Ø¨ Ø¨Ù† ØªØ±ÙƒÙŠ Ø§Ù„Ø¹ÙˆÙÙŠ", "Ø±ÙÙŠÙ Ù…Ø­Ù…Ø¯ ÙŠØ­ÙŠÙ‰ Ø²Ø¹Ø·Ø§Ù†", "Ø±Ù†ÙŠÙ… Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø³Ù„Ù… Ø§Ù„Ø«Ù…Ø§Ù„ÙŠ",
                "Ø±Ø¤Ù‰ Ø§Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† ØµØ§Ù„Ø­ Ø§Ù„Ù…ØºØ±Ø¨ÙŠ", "Ø±ÙŠØªØ§Ø¬ Ø¹Ø¨Ø¯Ø§Ù„Ø­ÙƒÙŠÙ… Ù…Ø¸ÙØ± Ø§Ù†ÙˆØ±",
                "Ø±ÙŠÙ†Ø§Ø¯ Ø·Ø§Ø±Ù‚ Ø¹ÙˆØ¶Ù‡ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ", "Ø´Ø§Ø¯Ù† ÙÙ‡Ø¯ Ø¨Ù† Ø®Ø¶Ø± Ø§Ù„Ù†ÙÙŠØ¹ÙŠ", "ÙØ§Ø·Ù…Ù‡ Ø­Ø³ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ø­Ù…Ø¯", "Ù„Ø§Ù†Ø§ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø²Ù‚ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø·Ù„Ø­ÙŠ", "Ù„ÙŠØ§Ù† Ø¨Ù†Øª Ù‡Ø§Ù†ÙŠ Ø§Ø¨Ù† Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ",
                "Ù…Ø³ØªÙˆØ±Ù‡ Ø´Ø¹ÙŠÙ„ Ø¨Ù† Ø¹Ù„ÙŠ Ø§Ù„Ù‡Ø°Ù„ÙŠ", "Ù…Ù‡Ø§ Ø¨Ù†Øª ÙÙ‡Ø¯ Ø§Ø¨Ù† Ø­Ø³Ù† Ø§Ù„Ù…Ø§Ù„ÙƒÙŠ", "Ù‡Ù…Ø³ ÙÙŠØµÙ„ Ø¨Ù† Ø¹ØµØ¨ÙŠ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ", "ÙˆØªÙŠÙ† Ø¹Ø¨Ø¯Ø§Ù„ÙƒØ±ÙŠÙ… Ø¨Ù† Ø¬Ø§Ø¨Ø± Ø§Ù„Ø«Ø¨ÙŠØªÙŠ", "ÙˆØ³Ù† Ø®Ø§Ù„Ø¯ Ø¹ÙŠØ¶Ù‡ Ø§Ù„Ù…Ø§Ù„ÙƒÙŠ", "ÙŠØ§Ø±Ø§ Ø¹Ù…Ø± Ù‡Ø§Ø±ÙˆÙ†"
            ]
        };
        
        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('#nav-menu li');
            navLinks.forEach(link => link.addEventListener('click', () => navigateTo(link.dataset.page)));

            const classSelect = document.getElementById('class-select');
            classSelect.addEventListener('change', (e) => {
                appState.currentClass = e.target.value;
                initializeStudentsForClass(appState.currentClass);
            });
            
            for (const classId in masterStudentLists) {
                masterStudentLists[classId] = masterStudentLists[classId]
                    .map(name => name.replace(/ï‚·\s*/g, '').trim())
                    .filter((value, index, self) => self.indexOf(value) === index && value.length > 1);
            }

            initializeStudentsForClass(appState.currentClass);
            
            document.getElementById('start-timer').addEventListener('click', startTimer);
            document.getElementById('pause-timer').addEventListener('click', pauseTimer);
            document.getElementById('reset-timer').addEventListener('click', resetTimer);
            document.getElementById('open-followup-btn').addEventListener('click', openFollowupModal);
            document.getElementById('export-followup-btn').addEventListener('click', exportFollowupReport);
            document.getElementById('add-student-btn').addEventListener('click', addStudent);
            document.getElementById('management-box-header').addEventListener('click', () => {
                document.getElementById('management-box').classList.toggle('collapsed');
            });
            
            // KWL listeners
            document.getElementById('kwl-k-input').addEventListener('change', (e) => appState.kwl.k = e.target.value);
            document.getElementById('kwl-w-input').addEventListener('change', (e) => appState.kwl.w = e.target.value);
            document.getElementById('kwl-l-input').addEventListener('change', (e) => appState.kwl.l = e.target.value);
            
            // Game Listeners
            const gameItems = document.querySelectorAll('.game-item');
            const gameSlots = document.querySelectorAll('.game-slot');
            gameItems.forEach(item => {
                item.addEventListener('dragstart', (e) => { appState.draggedItem = e.target; });
            });
            gameSlots.forEach(slot => {
                slot.addEventListener('dragover', (e) => e.preventDefault());
                slot.addEventListener('drop', handleGameDrop);
            });

            populateAllFAStudentDropdowns();
        });

        function navigateTo(pageId) {
            appState.currentPage = pageId;
            document.querySelectorAll('.page').forEach(page => page.classList.toggle('active', page.id === `${pageId}-page`));
            document.querySelectorAll('#nav-menu li').forEach(link => link.classList.toggle('active', link.dataset.page === pageId));
            if (pageId === 'report') generateReport();
        }

        function initializeStudentsForClass(classId) {
            if (!appState.students[classId]) {
                const studentNames = masterStudentLists[classId] || [];
                appState.students[classId] = studentNames.map((name, index) => ({ id: Date.now() + index, name }));
            }
            if (!appState.followup[classId]) {
                appState.followup[classId] = {};
                appState.students[classId].forEach(s => {
                    appState.followup[classId][s.id] = { attendance: 'unchecked', participation: 0, behavior: '' };
                });
            }
            if (!appState.formativeAssessments[classId]) appState.formativeAssessments[classId] = {};
            if (!appState.diagnosticQuizResults[classId]) appState.diagnosticQuizResults[classId] = {};
            if (!appState.interactions[classId]) appState.interactions[classId] = [];

            renderStudentList();
            populateAllFAStudentDropdowns();
        }

        function renderStudentList() {
            const studentList = document.getElementById('student-list');
            studentList.innerHTML = '';
            const currentStudents = appState.students[appState.currentClass] || [];
            currentStudents.forEach(student => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <input type="text" value="${student.name}" onchange="updateStudentName(${student.id}, this.value)">
                    <button class="btn-danger" onclick="deleteStudent(${student.id})">Ø­Ø°Ù</button>
                `;
                studentList.appendChild(li);
            });
        }

        function updateStudentName(studentId, newName) {
            const student = appState.students[appState.currentClass].find(s => s.id == studentId);
            if (student) {
                student.name = newName.trim();
                populateAllFAStudentDropdowns();
            }
        }
        
        function addStudent() {
            const nameInput = document.getElementById('new-student-name');
            const newName = nameInput.value.trim();
            if (newName === '') return showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©.', 'warning');
            const newId = Date.now();
            const newStudent = { id: newId, name: newName };
            const currentClass = appState.currentClass;
            appState.students[currentClass].push(newStudent);
            appState.followup[currentClass][newId] = { attendance: 'unchecked', participation: 0, behavior: '' };
            nameInput.value = '';
            renderStudentList();
            populateAllFAStudentDropdowns();
            showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­.');
        }

        function deleteStudent(studentId) {
            const currentClass = appState.currentClass;
            appState.students[currentClass] = appState.students[currentClass].filter(s => s.id != studentId);
            delete appState.followup[currentClass][studentId];
            renderStudentList();
            populateAllFAStudentDropdowns();
        }
        
        function populateStudentDropdown(selectElementId) {
            const select = document.getElementById(selectElementId);
            if (!select) return;
            select.innerHTML = '<option value="">Ø§Ø®ØªØ±ÙŠ Ø·Ø§Ù„Ø¨Ø©...</option>';
            const currentStudents = appState.students[appState.currentClass] || [];
            currentStudents.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = student.name;
                select.appendChild(option);
            });
        }

        function populateAllFAStudentDropdowns() {
            ['fa1-student', 'fa-kwl-student', 'fa2-student', 'fa3-student'].forEach(populateStudentDropdown);
        }

        function submitFA(assessmentId, assessmentTitle, isParticipationOnly = false) {
            const studentSelect = document.getElementById(`${assessmentId}-student`);
            const responseTextarea = document.getElementById(`${assessmentId}-response`);
            const studentId = studentSelect.value;
            
            if (!studentId) return showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨Ø©.', 'warning');
            
            let response = 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.';
            if (!isParticipationOnly) {
                response = responseTextarea.value.trim();
                if (response === '') return showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©.', 'warning');
            }
            
            const studentName = appState.students[appState.currentClass].find(s => s.id == studentId).name;
            if (!appState.formativeAssessments[appState.currentClass]) appState.formativeAssessments[appState.currentClass] = {};
            
            appState.formativeAssessments[appState.currentClass][assessmentId] = { studentId, studentName, response, title: assessmentTitle };
            showNotification(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨Ø© ${studentName} Ø¨Ù†Ø¬Ø§Ø­.`);
            studentSelect.value = '';
            if (responseTextarea) responseTextarea.value = '';
        }

        function startTimer() {
            if (appState.timer.isRunning) return;
            appState.timer.isRunning = true;
            appState.timer.interval = setInterval(() => {
                appState.timer.seconds++;
                updateTimerDisplay();
            }, 1000);
        }

        function pauseTimer() {
            appState.timer.isRunning = false;
            clearInterval(appState.timer.interval);
        }

        function resetTimer() {
            pauseTimer();
            appState.timer.seconds = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(appState.timer.seconds / 60);
            const seconds = appState.timer.seconds % 60;
            document.getElementById('timer-display').textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            if (!notification) return;
            notification.textContent = message;
            notification.style.backgroundColor = type === 'success' ? 'var(--primary-color)' : 'var(--warning-color)';
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 3000);
        }

        function openModal(modalId) { document.getElementById(modalId).style.display = 'flex'; }
        function closeModal(modalId) { document.getElementById(modalId).style.display = 'none'; }

        function openQuestionModal(question, section) {
            if (!question || !section) return;
            appState.currentQuestion = { section, question };
            document.getElementById('modal-question-text').textContent = question;
            const studentSelect = document.getElementById('modal-student-select');
            studentSelect.innerHTML = '';
            const currentStudents = appState.students[appState.currentClass] || [];
            currentStudents.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = student.name;
                studentSelect.appendChild(option);
            });
            openModal('question-modal');
        }

        function awardMedal(type) {
            const studentId = document.getElementById('modal-student-select').value;
            const student = appState.students[appState.currentClass].find(s => s.id == studentId);
            if (student) {
                appState.medals.push({ studentId: student.id, studentName: student.name, classId: appState.currentClass, section: appState.currentQuestion.section, medal: type });
                const medalType = type === 'gold' ? 'Ø°Ù‡Ø¨ÙŠØ©' : type === 'silver' ? 'ÙØ¶ÙŠØ©' : 'Ø¨Ø±ÙˆÙ†Ø²ÙŠØ©';
                showNotification(`ØªÙ… Ù…Ù†Ø­ ${student.name} Ù…ÙŠØ¯Ø§Ù„ÙŠØ© ${medalType}.`);
            }
            closeModal('question-modal');
        }

        // --- FOLLOW-UP MODAL (IMPROVED) ---
        function openFollowupModal() {
            document.getElementById('followup-lesson-title').textContent = document.getElementById('lesson-title').textContent;
            document.getElementById('followup-class-name').textContent = document.querySelector(`#class-select option[value="${appState.currentClass}"]`).textContent;
            document.getElementById('followup-date').textContent = new Date().toLocaleDateString('ar-SA');
            
            const tableBody = document.getElementById('followup-table-body');
            tableBody.innerHTML = '';
            const currentStudents = appState.students[appState.currentClass];
            const currentFollowup = appState.followup[appState.currentClass];

            currentStudents.forEach(student => {
                const studentFollowup = currentFollowup[student.id];
                const row = document.createElement('tr');
                
                let attendanceContent = '';
                let attendanceClassName = 'status-cell';
                if (studentFollowup.attendance === 'checked') {
                    attendanceContent = 'âœ“';
                    attendanceClassName += ' checked';
                } else if (studentFollowup.attendance === 'crossed') {
                    attendanceContent = 'âœ—';
                    attendanceClassName += ' crossed';
                }

                row.innerHTML = `
                    <td>${student.name}</td>
                    <td class="${attendanceClassName}" data-student-id="${student.id}" data-category="attendance">${attendanceContent}</td>
                    <td class="participation-cell" data-student-id="${student.id}" data-category="participation">${studentFollowup.participation}</td>
                    <td class="behavior-cell"><input type="text" value="${studentFollowup.behavior || ''}" data-student-id="${student.id}" data-category="behavior"></td>
                `;
                tableBody.appendChild(row);
            });

            tableBody.querySelectorAll('.status-cell, .participation-cell, .behavior-cell input').forEach(cell => {
                if (cell.tagName === 'INPUT') {
                    cell.addEventListener('change', handleFollowupChange);
                } else {
                    cell.addEventListener('click', handleFollowupChange);
                }
            });

            openModal('followup-modal');
        }
        
        function handleFollowupChange(event) {
            const element = event.target;
            const studentId = element.dataset.studentId;
            const category = element.dataset.category;
            const classId = appState.currentClass;
            
            if (category === 'attendance') {
                const currentState = appState.followup[classId][studentId].attendance;
                let newState = (currentState === 'unchecked') ? 'checked' : (currentState === 'checked') ? 'crossed' : 'unchecked';
                appState.followup[classId][studentId].attendance = newState;
                
                element.classList.remove('checked', 'crossed');
                if (newState === 'checked') {
                    element.textContent = 'âœ“';
                    element.classList.add('checked');
                } else if (newState === 'crossed') {
                    element.textContent = 'âœ—';
                    element.classList.add('crossed');
                } else {
                    element.textContent = '';
                }
            } else if (category === 'participation') {
                appState.followup[classId][studentId].participation++;
                element.textContent = appState.followup[classId][studentId].participation;
            } else if (category === 'behavior') {
                appState.followup[classId][studentId].behavior = element.value;
            }
        }

        function exportFollowupReport() {
            const classId = appState.currentClass;
            const students = appState.students[classId];
            const followupData = appState.followup[classId];
            const lessonTitle = document.getElementById('lesson-title').textContent;
            
            let tableRows = '';
            students.forEach(student => {
                const data = followupData[student.id];
                const attendanceSymbol = (status) => (status === 'checked' ? 'âœ“' : status === 'crossed' ? 'âœ—' : '-');
                tableRows += `<tr><td>${student.name}</td><td style="text-align: center;">${attendanceSymbol(data.attendance)}</td><td style="text-align: center;">${data.participation}</td><td>${data.behavior}</td></tr>`;
            });
            const reportHtml = `<html><head><title>ÙƒØ´Ù Ù…ØªØ§Ø¨Ø¹Ø©: ${lessonTitle}</title><meta charset="UTF-8"><link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet"><style>body{font-family:'Tajawal',sans-serif;direction:rtl;padding:20px;}.report-container{border:2px solid #333;padding:20px;border-radius:10px;max-width:800px;margin:auto;}.header,.footer{text-align:center;margin-bottom:20px;}table{width:100%;border-collapse:collapse;margin-bottom:20px;}th,td{border:1px solid #ddd;padding:12px;text-align:right;}th{background-color:#f2f2f2;text-align:center;}.footer p{margin:5px 0;}</style></head><body><div class="report-container"><div class="header"><h2>ÙƒØ´Ù Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­ØµØ©</h2><h3>${lessonTitle}</h3><p><strong>Ø§Ù„ØµÙ:</strong> ${document.querySelector(`#class-select option[value="${classId}"]`).textContent} | <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${new Date().toLocaleDateString('ar-SA')}</p><p><strong>Ø§Ù„Ù…Ø¹Ù„Ù…Ø©:</strong> Ø£Ù…Ù„ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ</p></div><table><thead><tr><th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th><th>Ø§Ù„Ø­Ø¶ÙˆØ±</th><th>Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© (Ø¹Ø¯Ø¯)</th><th>Ø§Ù„Ø³Ù„ÙˆÙƒ (Ù…Ù„Ø§Ø­Ø¸Ø§Øª)</th></tr></thead><tbody>${tableRows}</tbody></table><div class="footer"><p><strong>Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</strong></p><p>(Ø§Ø³Ù… Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©)</p></div></div></body></html>`;
            const blob = new Blob([reportHtml], { type: 'text/html;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ÙƒØ´Ù_Ù…ØªØ§Ø¨Ø¹Ø©_${lessonTitle}_${document.querySelector(`#class-select option[value="${classId}"]`).textContent}.html`;
            link.click();
            URL.revokeObjectURL(link.href);
        }

        function checkAnswer(quizId, correctAnswer, radioName) {
            const quizContainer = document.getElementById(quizId);
            const selectedOption = quizContainer.querySelector(`input[name="${radioName}"]:checked`);
            const feedbackEl = quizContainer.querySelector('.quiz-feedback');
            
            if (!selectedOption) {
                showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹.', 'warning');
                return;
            }
            
            const isCorrect = selectedOption.value === correctAnswer;
            if (isCorrect) {
                feedbackEl.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª.';
                feedbackEl.className = 'quiz-feedback correct';
            } else {
                feedbackEl.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                feedbackEl.className = 'quiz-feedback incorrect';
            }
            feedbackEl.style.display = 'block';

            const questionText = quizContainer.querySelector('.quiz-question').dataset.questionText;
            appState.diagnosticQuizResults[appState.currentClass][quizId] = {
                question: questionText,
                answer: selectedOption.parentElement.textContent.trim(),
                isCorrect: isCorrect
            };
        }

        function toggleTrackItem(element) {
            element.classList.toggle('active');
            const interactionText = element.querySelector('strong').textContent;
            appState.interactions[appState.currentClass].push({
                type: 'Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø¹Ù†ØµØ± ØªÙØ§Ø¹Ù„ÙŠ',
                description: `"${interactionText}"`,
                timestamp: new Date()
            });
        }
        
        function handleGameDrop(e) {
            e.preventDefault();
            if (!appState.draggedItem) return;
            
            const slot = e.target.closest('.game-slot');
            if (slot.innerHTML.includes('Ø§Ù„Ø®Ø·ÙˆØ©')) { // Check if slot is empty
                slot.innerHTML = ''; // Clear 'Ø§Ù„Ø®Ø·ÙˆØ© X' text
                slot.appendChild(appState.draggedItem);
            }
            checkGameOrder();
        }

        function checkGameOrder() {
            const slots = document.querySelectorAll('.game-slot');
            let correctCount = 0;
            let allFilled = true;
            slots.forEach(slot => {
                const item = slot.querySelector('.game-item');
                if (item) {
                    if (item.dataset.item === slot.dataset.order) {
                        slot.style.borderColor = 'var(--success-color)';
                        correctCount++;
                    } else {
                        slot.style.borderColor = 'var(--accent-color)';
                    }
                } else {
                    allFilled = false;
                }
            });

            const feedback = document.getElementById('game-feedback-text');
            if (allFilled) {
                if (correctCount === slots.length) {
                    feedback.textContent = 'Ù…Ù…ØªØ§Ø²! Ø§Ù„ØªØ±ØªÙŠØ¨ ØµØ­ÙŠØ­.';
                    feedback.style.color = 'var(--success-color)';
                } else {
                    feedback.textContent = 'Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨ØŒ Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                    feedback.style.color = 'var(--accent-color)';
                }
            }
        }
        
        function exportLearningPlan() {
            const lessonTitle = document.getElementById('lesson-title').textContent;
            const planContent = document.getElementById('learning-plan-section').innerHTML;
            
            const planHtml = `
                <html>
                <head>
                    <title>Ø®Ø·Ø© ØªØ¹Ù„Ù…: ${lessonTitle}</title>
                    <meta charset="UTF-8">
                    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
                    <style>
                        body { font-family: 'Tajawal', sans-serif; direction: rtl; padding: 30px; line-height: 1.8; color: #34495e; }
                        .plan-container { border: 2px solid #2c3e50; padding: 20px; border-radius: 10px; max-width: 800px; margin: auto; }
                        h1, h3, h4 { color: #2c3e50; }
                        h1 { text-align: center; border-bottom: 2px solid #8E44AD; padding-bottom: 10px; }
                        h3 { color: #d35400; }
                        ul, ol { padding-right: 20px; }
                        button { display: none; } /* Hide button in exported file */
                    </style>
                </head>
                <body>
                    <div class="plan-container">
                        <h1>Ø®Ø·Ø© ØªØ¹Ù„Ù… Ø¯Ø±Ø³: ${lessonTitle}</h1>
                        ${planContent}
                    </div>
                </body>
                </html>
            `;
            const blob = new Blob([planHtml], { type: 'text/html;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Ø®Ø·Ø©_ØªØ¹Ù„Ù…_${lessonTitle}.html`;
            link.click();
            URL.revokeObjectURL(link.href);
        }

        function generateReport() {
            const reportContent = document.getElementById('report-content');
            const classId = appState.currentClass;
            const lessonTitle = document.getElementById('lesson-title').textContent;
            
            // Organize class activity data
            const activityGroups = appState.classActivity.groups;
            let activityHtml = `<h4>ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª: ${appState.classActivity.organizationMethod}</h4>`;
            if(activityGroups && activityGroups.length > 0){
                activityHtml += '<ul>';
                activityGroups.forEach((group, index) => {
                    activityHtml += `<li><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ${index + 1}:</strong> ${group.join(', ')}</li>`;
                });
                activityHtml += '</ul>';
            } else {
                 activityHtml += '<p>Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ ØªÙ†Ø¸ÙŠÙ… Ù„Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØµÙÙŠ.</p>';
            }


            let html = `<h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­ØµØ©</h3>`;
            html += `<table class="styled-table">
                        <tr><th>Ø§Ù„Ø¨Ù†Ø¯</th><th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th></tr>
                        <tr><td>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³</td><td>${lessonTitle}</td></tr>
                        <tr><td>ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…</td><td>${new Date().toLocaleDateString('ar-SA')}</td></tr>
                        <tr><td>Ø§Ù„ÙØµÙ„</td><td>${document.querySelector(`#class-select option[value="${classId}"]`).textContent}</td></tr>
                        <tr><td>Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</td><td>${document.getElementById('strategy-select').value}</td></tr>
                     </table>`;

            const diagResults = appState.diagnosticQuizResults[classId] || {};
            html += `<h3>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„ØªØ´Ø®ÙŠØµÙŠ</h3>`;
            html += `<table class="styled-table">
                        <thead><tr><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th><th>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</th><th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th></tr></thead><tbody>`;
            if (Object.keys(diagResults).length > 0) {
                for (const key in diagResults) {
                    const result = diagResults[key];
                    html += `<tr>
                                <td>${result.question}</td>
                                <td>${result.answer}</td>
                                <td style="color:${result.isCorrect ? 'var(--success-color)' : 'var(--accent-color)'}; font-weight:bold;">${result.isCorrect ? 'âœ“ ØµØ­ÙŠØ­' : 'âœ— Ø®Ø·Ø£'}</td>
                             </tr>`;
                }
            } else {
                html += `<tr><td colspan="3">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„ØªØ´Ø®ÙŠØµÙŠ.</td></tr>`;
            }
            html += `</tbody></table>`;

            const faResults = appState.formativeAssessments[classId] || {};
            html += `<h3>Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„ØªÙƒÙˆÙŠÙ†ÙŠ</h3>`;
            html += `<table class="styled-table">
                        <thead><tr><th>Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…</th><th>Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</th></tr></thead><tbody>`;
            if (Object.keys(faResults).length > 0) {
                for (const key in faResults) {
                    const assessment = faResults[key];
                    html += `<tr>
                                <td>${assessment.title}</td>
                                <td>${assessment.studentName}</td>
                                <td>${assessment.response.replace(/\n/g, '<br>')}</td>
                             </tr>`;
                }
            } else {
                html += `<tr><td colspan="3">Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¬Ø§Ø¨Ø§Øª Ù„Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„ØªÙƒÙˆÙŠÙ†ÙŠ.</td></tr>`;
            }
            html += `</tbody></table>`;
            
            const interactions = appState.interactions[classId] || [];
            html += `<h3>Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø®Ù„Ø§Ù„ Ø§Ù„Ø­ØµØ©</h3>`;
            html += `<table class="styled-table">
                        <thead><tr><th>Ù†ÙˆØ¹ Ø§Ù„ØªÙØ§Ø¹Ù„</th><th>Ø§Ù„ÙˆØµÙ</th></tr></thead><tbody>`;
            if (interactions.length > 0) {
                 interactions.forEach(interaction => {
                    html += `<tr><td>${interaction.type}</td><td>${interaction.description}</td></tr>`;
                });
            } else {
                 html += `<tr><td colspan="2">Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ ØªÙØ§Ø¹Ù„Ø§Øª.</td></tr>`;
            }
            html += `</tbody></table>`;

            const medals = appState.medals.filter(m => m.classId === classId);
            html += `<h3>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª (Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ù…ÙŠØ¯Ø§Ù„ÙŠØ§Øª)</h3>`;
            html += `<table class="styled-table">
                        <thead><tr><th>Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th><th>Ø§Ù„Ù…ÙŠØ¯Ø§Ù„ÙŠØ©</th><th>Ø§Ù„Ù‚Ø³Ù…</th></tr></thead><tbody>`;
            if (medals.length > 0) {
                medals.forEach(medal => {
                    const medalIcon = medal.medal === 'gold' ? 'ğŸ¥‡' : medal.medal === 'silver' ? 'ğŸ¥ˆ' : 'ğŸ¥‰';
                    html += `<tr>
                                <td>${medal.studentName}</td>
                                <td>${medalIcon}</td>
                                <td>${document.querySelector(`li[data-page="${medal.section}"]`).textContent}</td>
                             </tr>`;
                });
            } else {
                html += `<tr><td colspan="3">Ù„Ù… ÙŠØªÙ… Ù…Ù†Ø­ Ø£ÙŠ Ù…ÙŠØ¯Ø§Ù„ÙŠØ§Øª.</td></tr>`;
            }
            html += `</tbody></table>`;
            
            html += `<h3>Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ¹Ù„Ù… (KWL)</h3>`;
            html += `<table class="styled-table">
                        <thead><tr><th>Ù…Ø§Ø°Ø§ Ø£Ø¹Ø±ÙØŸ</th><th>Ù…Ø§Ø°Ø§ Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£ØªØ¹Ù„Ù…ØŸ</th><th>Ù…Ø§Ø°Ø§ ØªØ¹Ù„Ù…ØªØŸ</th></tr></thead>
                        <tbody>
                            <tr>
                                <td>${appState.kwl.k.replace(/\n/g, '<br>')}</td>
                                <td>${appState.kwl.w.replace(/\n/g, '<br>')}</td>
                                <td>${appState.kwl.l.replace(/\n/g, '<br>')}</td>
                            </tr>
                        </tbody>
                     </table>`;
                     
            html += `<h3>ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØµÙÙŠ</h3>${activityHtml}`;

            reportContent.innerHTML = html;
        }
        
        function exportReport() {
            const reportContent = document.getElementById('report-content').innerHTML;
            const lessonTitle = document.getElementById('lesson-title').textContent;
            const reportWindow = window.open('', '', 'width=800,height=600');
            reportWindow.document.write(`<html><head><title>ØªÙ‚Ø±ÙŠØ± Ø¯Ø±Ø³: ${lessonTitle}</title><meta charset="UTF-8"><link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet"><style>body{font-family:'Tajawal',sans-serif;direction:rtl;padding:20px;}h1,h3{color:#2c3e50;}h3{border-bottom:2px solid #8E44AD;padding-bottom:5px;margin-top:30px;}table{width:100%;border-collapse:collapse;margin-bottom:20px;}th,td{border:1px solid #ddd;padding:12px;text-align:right;}th{background-color:#2c3e50;color:white;} ul { padding-right: 20px; }</style></head><body><h1>ØªÙ‚Ø±ÙŠØ± Ø¯Ø±Ø³: ${lessonTitle}</h1>${reportContent}</body></html>`);
            reportWindow.document.close();
            reportWindow.print();
        }
    </script>
</body>
</html>

