<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªØ®Ø·ÙŠØ· Ø´Ø§ØºÙ„ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</title>
  <!-- Ø£Ù‡Ù… Ù†Ù‚Ø·Ø©: Ø¶Ø¨Ø· Ø§Ù„Ù€ viewport Ù„ØªØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ø´Ø§Ø´Ø§Øª -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#158078">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700&display=swap" rel="stylesheet">
  <style>
    body {background:#f5f6f7;font-family:'Cairo',Tahoma,Arial,sans-serif;}
    header {background:#158078;color:#fff;padding:32px 0 18px 0;text-align:center;border-radius:0 0 30px 30px;}
    h1 {font-size:2.3em;margin-bottom:8px;font-weight:700;}
    .container {max-width:99vw; width:99%; margin:0 auto; padding:10px 2vw 50px 2vw;}
    .panel {background:#e7e5db;border-radius:22px;box-shadow:0 2px 16px 0 #0b595247;margin-bottom:26px;padding:30px 25px 18px 25px;}
    h2 {color:#158078;font-weight:bold;margin-bottom:14px;font-size:1.24em;border-right:8px solid #158078;padding-right:12px;display:inline-block;border-radius:0 17px 17px 0;}
    label {font-size:1.06em;margin-bottom:5px;color:#158078;font-weight:bold;}
    input,select,textarea {width:100%;padding:9px 10px;border-radius:8px;border:1.5px solid #d7ccb6;background:#f5f6f7;color:#183c3b;font-size:1.01em;margin-bottom:13px;}
    input:focus,select:focus,textarea:focus {outline:none;border:1.5px solid #158078;}
    textarea {resize:vertical;}
    .btn {background:linear-gradient(90deg,#158078,#1eb09b 70%);color:#fff;border:none;border-radius:9px;padding:10px 32px;font-size:1.07em;cursor:pointer;margin:4px 7px 8px 0;font-weight:bold;box-shadow:0 1px 4px #0002;}
    .btn:hover {background:linear-gradient(90deg,#1eb09b 30%,#158078 100%);}
    table {width:100%;border-collapse:collapse;margin-bottom:10px;background:#f5f6f7;color:#183c3b;font-size:1.01em;border-radius:14px;overflow:hidden;box-shadow:0 0.5px 6px #15807822; display: block; overflow-x: auto;}
    th,td {border:1px dashed #c6a96d;padding:8px 7px;text-align:center;}
    th {background:#158078;color:#fff;font-weight:bold;}
    .footer-signature {color:#9e7e45;background:#e5e1d4;border-radius:0 0 18px 18px;font-size:1.13em;text-align:center;padding:19px 0 13px 0;margin-top:38px;font-weight:bold;border-top:2px solid #c6a96d44;}
    .main-btns {text-align:center;margin-bottom:40px;}
    /* responsive styles */
    @media (max-width: 600px) {
      h1 {font-size:1.4em;}
      h2 {font-size:1em;}
      .panel {padding:15px 7px 10px 7px;}
      .container {padding:5px 0 30px 0;}
      table, th, td {font-size:0.97em;}
      input, select, textarea {font-size:0.97em;}
      .main-btns button, .btn {padding:7px 15px;font-size:1em;}
    }
  </style>
</head>
<body>
  <header>
    <h1>ØªØ®Ø·ÙŠØ· Ø´Ø§ØºÙ„ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© - Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©</h1>
    <div class="footer-signature">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„ØªØªØ¹Ù„ÙŠÙ… Ø¨Ø§Ù„Ø·Ø§Ø¦Ù - Ø«Ø§Ù†ÙˆÙŠØ© Ø¯Ø§Ø± Ø§Ù„ØªÙˆØ­ÙŠØ¯ </div>
  </header>
  <div class="container">
    <div class="main-btns">
      <button class="btn" id="exportHtmlBtn">ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„</button>
      <button class="btn" id="resetAllBtn">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø¬Ù…ÙŠØ¹</button>
    </div>
    <div class="panel">
      <h2>Ø§Ù„ÙƒØ§Ø¯Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h2>
      <form id="eduForm">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù:</label>
        <input type="text" id="eduName" required autocomplete="off">
        <label>Ø§Ù„Ø±ØªØ¨Ø©/Ø§Ù„ÙˆØµÙ:</label>
        <select id="eduJob" required>
          <option value="">-- Ø§Ø®ØªØ± --</option>
          <option>Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³</option>
          <option>Ù…Ø¹Ù„Ù… Ù…ØªÙ‚Ø¯Ù…</option>
          <option>Ù…Ø¹Ù„Ù… Ø®Ø¨ÙŠØ±</option>
          <option>Ù…Ø¯ÙŠØ± Ù…Ø¯Ø±Ø³Ø©</option>
          <option>ÙˆÙƒÙŠÙ„ Ù…Ø¯Ø±Ø³Ø©</option>
          <option>Ù…ÙˆØ¬Ù‡ Ø·Ù„Ø§Ø¨ÙŠ</option>
          <option>Ø±Ø§Ø¦Ø¯ Ù†Ø´Ø§Ø·</option>
          <option>Ù…ÙˆØ¬Ù‡ ØµØ­ÙŠ</option>
          <option>Ù…Ø­Ø¶Ø± Ù…Ø®ØªØ¨Ø±</option>
        </select>
        <div id="eduMaterialWrap">
          <label>Ø§Ù„Ù…Ø§Ø¯Ø© (Ù„Ù„Ù…Ø¹Ù„Ù… ÙÙ‚Ø·):</label>
          <select id="eduMaterial"></select>
        </div>
        <div id="eduSpecWrap">
          <label>Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:</label>
          <select id="eduSpec">
            <option value="">-- Ø§Ø®ØªØ± --</option>
            <option>Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</option>
            <option>Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø§Ù„Ù„ØºÙˆÙŠØ©</option>
            <option>Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
            <option>Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
            <option>Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</option>
            <option>Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ ÙˆØ¹Ù„ÙˆÙ… Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„ÙØ¶Ø§Ø¡</option>
            <option>Ø§Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø­ÙŠØ§Ø©</option>
            <option>Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©/Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</option>
            <option>Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ù„ÙŠØ§Ù‚Ø©</option>
            <option>Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</option>
            <option>Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</option>
            <option>Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</option>
            <option>Ø§Ù„ÙÙ†ÙˆÙ†</option>
            <option>Ø§Ù„Ø¨Ø­Ø« ÙˆÙ…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</option>
            <option>Ù…Ø¬Ø§Ù„ Ø§Ø®ØªÙŠØ§Ø±ÙŠ</option>
            <option>Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø£Ø¯Ø¨ÙŠØ©</option>
          </select>
        </div>
        <div id="eduPeriodsWrap">
          <label>Ø¹Ø¯Ø¯ Ø§Ù„ÙØµÙˆÙ„:</label>
          <input type="number" id="eduClasses" min="0" value="0">
          <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø­ØµØµ (ÙŠØ­Ø³Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§):</label>
          <input type="number" id="eduPeriods" min="0" value="0" readonly>
        </div>
        <label>Ù…Ù‡Ø§Ù… Ø£Ø®Ø±Ù‰:</label>
        <textarea id="eduTasks" rows="2"></textarea>
        <div id="eduReleaseWrap" style="display:none">
          <label>Ø­Ø§Ù„Ø© Ø§Ù„ØªÙØ±Øº:</label>
          <select id="eduRelease">
            <option value="">-- Ø§Ø®ØªØ± --</option>
            <option>Ù…ÙØ±Øº ÙƒÙ„ÙŠÙ‹Ø§</option>
            <option>Ù…ÙØ±Øº Ø¬Ø²Ø¦ÙŠÙ‹Ø§</option>
          </select>
        </div>
        <button class="btn" type="submit">Ø¥Ø¶Ø§ÙØ©</button>
      </form>
      <div id="eduTableContainer"></div>
    </div>
    <div class="footer-signature">
      ÙÙƒØ±Ø© ÙˆØªØµÙ…ÙŠÙ… Ù…Ø­Ù…Ø¯ Ù…Ø¬Ù…Ù…ÙŠ â€“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025
    </div>
  </div>
<script>
/* Ù†ÙØ³ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ù‚Ø¯ÙŠÙ… - Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ */
const materials = [
  {name:"Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… ÙˆØªÙØ³ÙŠØ±Ù‡", periods:5},{name:"Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø§Ù„Ù„ØºÙˆÙŠØ© 1 (1-1)",periods:5},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 1 (1-1)",periods:5},
  {name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 1 (1-1)",periods:5},{name:"Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© 1 (1-1)",periods:3},{name:"Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ (1)",periods:5},{name:"Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ø§Ù‚Ø¯",periods:4},
  {name:"Ø¹Ù„Ù… Ø§Ù„Ø¨ÙŠØ¦Ø©",periods:3},{name:"Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø§Ù„Ù„ØºÙˆÙŠØ© 1 (2-1)",periods:5},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 1 (2-1)",periods:5},{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 1 (2-1)",periods:5},
  {name:"Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© 1 (2-1)",periods:3},{name:"Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ (1)",periods:5},{name:"Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ©",periods:3},{name:"Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ø¨Ø¯Ù†ÙŠØ© 1 (1-1)",periods:3},
  {name:"Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©",periods:3},{name:"Ø§Ù„Ø­Ø¯ÙŠØ« (1)",periods:3},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 1 (3-1)",periods:5},{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 1 (3-1)",periods:5},
  {name:"Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© 1 (3-1)",periods:3},{name:"Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ (1)",periods:5},{name:"Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©",periods:3},{name:"Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ø¨Ø¯Ù†ÙŠØ© 1 (2-1)",periods:3},
  {name:"Ø§Ù„ØªÙˆØ­ÙŠØ¯ (1)",periods:3},{name:"Ø§Ù„ÙÙ†ÙˆÙ†",periods:3},{name:"Ø§Ù„Ù„ÙŠØ§Ù‚Ø© ÙˆØ§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„ØµØ­ÙŠØ©",periods:5},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 2 (1-2)",periods:5},
  {name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 2 (1-2)",periods:5},{name:"Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ 2 (1-2)",periods:5},{name:"Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ 2 (1-2)",periods:4},{name:"Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø§Ù„Ù„ØºÙˆÙŠØ© 2 (1-2)",periods:3},
  {name:"Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© 2 (1-2)",periods:3},{name:"Ø§Ù„ØªØ§Ø±ÙŠØ®",periods:5},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 2 (2-2)",periods:5},{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 2 (2-2)",periods:5},
  {name:"Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ 2 (2-2)",periods:5},{name:"Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ 2 (2-2)",periods:4},{name:"Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø§Ù„Ù„ØºÙˆÙŠØ© 2 (2-2)",periods:3},{name:"Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© 2 (2-2)",periods:3},
  {name:"Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ (2)",periods:5},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 2 (3-2)",periods:5},{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 2 (3-2)",periods:5},{name:"Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ 2 (3-2)",periods:5},
  {name:"Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ 2 (3-2)",periods:4},{name:"Ø§Ù„Ø¨Ø­Ø« ÙˆÙ…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",periods:3},{name:"Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",periods:3},{name:"Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© (3)",periods:3},
  {name:"Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ (3)",periods:5},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 3 (1-3)",periods:4},{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 3 (1-3)",periods:4},{name:"Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ 3 (1-3)",periods:5},
  {name:"Ù…Ø¬Ø§Ù„ Ø§Ø®ØªÙŠØ§Ø±ÙŠ",periods:4},{name:"Ø§Ù„ÙÙ‚Ù‡ (1)",periods:3},{name:"Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø­ÙŠØ§ØªÙŠØ©",periods:3},{name:"Ø§Ù„Ù…ÙˆØ§Ø·Ù†Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©",periods:3},
  {name:"Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£Ø±Ø¶ ÙˆØ§Ù„ÙØ¶Ø§Ø¡ (1-1)",periods:4},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 3 (2-3)",periods:4},{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 3 (2-3)",periods:4},
  {name:"Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ 3 (2-3)",periods:5},{name:"Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø£Ø¯Ø¨ÙŠØ©",periods:3},{name:"Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ù†ÙØ³ÙŠØ© ÙˆØ§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©",periods:3},{name:"Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ø¨Ø¯Ù†ÙŠØ© (2)",periods:4},
  {name:"Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£Ø±Ø¶ ÙˆØ§Ù„ÙØ¶Ø§Ø¡ (2-1)",periods:4},{name:"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 3 (3-3)",periods:4},{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 3 (3-3)",periods:4},{name:"Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ 3 (3-3)",periods:5}
];
const eduRanks = { "Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³":24, "Ù…Ø¹Ù„Ù… Ù…ØªÙ‚Ø¯Ù…":22, "Ù…Ø¹Ù„Ù… Ø®Ø¨ÙŠØ±":18 };
let educational = JSON.parse(localStorage.getItem('eduList')||"[]");
function fillMaterialList(){
  let msel=document.getElementById('eduMaterial');
  msel.innerHTML='<option value="">-- Ø§Ø®ØªØ± --</option>';
  materials.forEach(m=>msel.innerHTML+=`<option value="${m.name}" data-p="${m.periods}">${m.name}</option>`);
}
document.getElementById('eduJob').onchange = function(){
  let job = this.value;
  let isTeacher = ["Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³","Ù…Ø¹Ù„Ù… Ù…ØªÙ‚Ø¯Ù…","Ù…Ø¹Ù„Ù… Ø®Ø¨ÙŠØ±"].includes(job);
  document.getElementById('eduMaterialWrap').style.display = isTeacher?"block":"none";
  document.getElementById('eduSpecWrap').style.display = isTeacher?"block":"none";
  document.getElementById('eduPeriodsWrap').style.display = isTeacher?"block":"none";
  document.getElementById('eduReleaseWrap').style.display = (!isTeacher && job!=="")?"block":"none";
  if(isTeacher){ fillMaterialList(); }
  else{ document.getElementById('eduMaterial').innerHTML = ''; }
  document.getElementById('eduClasses').value=0;
  document.getElementById('eduPeriods').value=0;
};
fillMaterialList();
document.getElementById('eduMaterial').onchange=function(){
  let m=materials.find(x=>x.name===this.value);
  document.getElementById('eduPeriods').value=0;
  document.getElementById('eduClasses').value=0;
  if(m){
    document.getElementById('eduClasses').oninput=function(){
      let v=parseInt(this.value)||0;
      document.getElementById('eduPeriods').value=v*m.periods;
    };
  }
};
document.getElementById('eduForm').onsubmit=function(e){
  e.preventDefault();
  let name = document.getElementById('eduName').value.trim();
  let job = document.getElementById('eduJob').value;
  let material = document.getElementById('eduMaterial').value;
  let spec = document.getElementById('eduSpec').value;
  let classes = parseInt(document.getElementById('eduClasses').value)||0;
  let periods = parseInt(document.getElementById('eduPeriods').value)||0;
  let tasks = document.getElementById('eduTasks').value.trim();
  let release = "";
  if(["Ù…Ø¯ÙŠØ± Ù…Ø¯Ø±Ø³Ø©","ÙˆÙƒÙŠÙ„ Ù…Ø¯Ø±Ø³Ø©","Ù…ÙˆØ¬Ù‡ Ø·Ù„Ø§Ø¨ÙŠ","Ø±Ø§Ø¦Ø¯ Ù†Ø´Ø§Ø·","Ù…ÙˆØ¬Ù‡ ØµØ­ÙŠ","Ù…Ø­Ø¶Ø± Ù…Ø®ØªØ¨Ø±"].includes(job)){
    release = document.getElementById('eduRelease').value;
  }
  if(name==="")return;
  if(["Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³","Ù…Ø¹Ù„Ù… Ù…ØªÙ‚Ø¯Ù…","Ù…Ø¹Ù„Ù… Ø®Ø¨ÙŠØ±"].includes(job)){
    if(material===""||spec===""||isNaN(periods)){alert("ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© ÙˆØªØ®ØµØµ ØªØ¬Ù…ÙŠØ¹ÙŠ ÙˆØ¹Ø¯Ø¯ Ø­ØµØµ Ù„Ù„Ù…Ø¹Ù„Ù…");return;}
    educational.push({name,job,material,spec,classes,periods,tasks,release});
  }else{
    educational.push({name,job,material:"-",spec:"-",classes:"-",periods:"-",tasks,release});
  }
  this.reset();document.getElementById('eduReleaseWrap').style.display="none";
  renderTableEdu(); saveAllData();
};
document.getElementById('resetAllBtn').onclick=function(){
  if(confirm("ØªØ£ÙƒÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){
    educational=[];
    saveAllData();renderTableEdu();
  }
};
function saveAllData(){
  localStorage.setItem('eduList',JSON.stringify(educational));
}
function renderTableEdu(){
  let h="";
  if(!educational.length){h='<p style="text-align:center;color:#ccc">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ†.</p>';}
  else{
    h='<table><thead><tr><th>Ù…</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø±ØªØ¨Ø©/Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</th><th>ÙØµÙˆÙ„</th><th>Ø§Ù„Ø­ØµØµ</th><th>Ù…Ù‡Ø§Ù… Ø£Ø®Ø±Ù‰</th><th>Ø§Ù„ØªÙØ±Øº</th><th>Ø­Ø°Ù</th></tr></thead><tbody>';
    educational.forEach((emp,i)=>{
      h+=`<tr>
        <td>${i+1}</td>
        <td>${emp.name}</td>
        <td>${emp.job}</td>
        <td>${emp.material||"-"}</td>
        <td>${emp.spec||"-"}</td>
        <td>${emp.classes||"-"}</td>
        <td>${emp.periods||"-"}</td>
        <td>${emp.tasks||"-"}</td>
        <td>${emp.release||"-"}</td>
        <td><button class="btn" style="padding:2px 14px" onclick="deleteEmp(${i})">Ø­Ø°Ù</button></td>
      </tr>`;
    });
    h+='</tbody></table>';
  }
  document.getElementById('eduTableContainer').innerHTML = h;
}
window.deleteEmp = function(idx){
  educational.splice(idx,1);renderTableEdu();saveAllData();
};
renderTableEdu();

document.getElementById('exportHtmlBtn').onclick = function(){
  let specs = [
    "Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©","Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø§Ù„Ù„ØºÙˆÙŠØ©","Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©","Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª","Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©","Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ ÙˆØ¹Ù„ÙˆÙ… Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„ÙØ¶Ø§Ø¡",
    "Ø§Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø­ÙŠØ§Ø©","Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©/Ø§Ù„Ù…Ù‡Ù†ÙŠØ©","Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ù„ÙŠØ§Ù‚Ø©","Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©","Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
    "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡","Ø§Ù„ÙÙ†ÙˆÙ†","Ø§Ù„Ø¨Ø­Ø« ÙˆÙ…ØµØ§Ø¯Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª","Ù…Ø¬Ø§Ù„ Ø§Ø®ØªÙŠØ§Ø±ÙŠ","Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø£Ø¯Ø¨ÙŠØ©"
  ];
  let reportRows = [];
  specs.forEach(spec=>{
    let teachers = educational.filter(e=>
      ["Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³","Ù…Ø¹Ù„Ù… Ù…ØªÙ‚Ø¯Ù…","Ù…Ø¹Ù„Ù… Ø®Ø¨ÙŠØ±"].includes(e.job) && e.spec==spec
    );
    let totalPeriods = teachers.reduce((s,x)=>s+(parseInt(x.periods)||0),0);
    let khabeer = teachers.filter(x=>x.job=="Ù…Ø¹Ù„Ù… Ø®Ø¨ÙŠØ±").length;
    let motakadem = teachers.filter(x=>x.job=="Ù…Ø¹Ù„Ù… Ù…ØªÙ‚Ø¯Ù…").length;
    let mmaris = teachers.filter(x=>x.job=="Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³").length;
    let pool = [];
    for(let i=0;i<khabeer;i++) pool.push(18);
    for(let i=0;i<motakadem;i++) pool.push(22);
    for(let i=0;i<mmaris;i++) pool.push(24);
    pool.sort((a,b)=>a-b);
    let remain = totalPeriods, used = 0;
    for(let i=0;i<pool.length;i++){
      if(remain<=0) break;
      let take = Math.min(pool[i], remain);
      remain -= take;
      used++;
    }
    let surplus = 0, resultTxt = "", needed = 0;
    if(remain>0){
      needed = Math.ceil(remain/24);
      resultTxt = `<b style="color:#bf4f4f">Ø§Ø­ØªÙŠØ§Ø¬ ${needed} Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³ (${remain} Ø­ØµØ© ØºÙŠØ± Ù…ØºØ·Ø§Ø©)</b>`;
    } else if(totalPeriods>0 && pool.length > 0 && used<pool.length){
      let extra = pool.length-used;
      let extraMmaris = Math.min(extra, mmaris);
      resultTxt = `<b style="color:#32bf32">ÙˆÙØ± ${extraMmaris} Ù…Ø¹Ù„Ù… Ù…Ù…Ø§Ø±Ø³</b>`;
      let left = extra - extraMmaris;
      if(left > 0) resultTxt += ` + ÙˆÙØ± ${left} Ù…Ù† Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ø£Ø¹Ù„Ù‰`;
    } else {
      resultTxt = `<b style="color:#158078">ØªØºØ·ÙŠØ© Ø¹Ø§Ø¯Ù„Ø©</b>`;
    }
    reportRows.push(`<tr><td>${spec}</td><td>${totalPeriods}</td><td>${teachers.length}</td><td>${resultTxt}</td></tr>`);
  });
  let tbl1 = document.getElementById('eduTableContainer').innerHTML;
  let html = `
  <!DOCTYPE html>
  <html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8">
    <title>ØªÙ‚Ø±ÙŠØ± ØªØ®Ø·ÙŠØ· Ø´Ø§ØºÙ„ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</title>
    <style>
      body {background:#f5f6f7;font-family:'Cairo',Tahoma,Arial,sans-serif;color:#183c3b;}
      .container {max-width:1140px;margin:0 auto;padding:0 10px 25px 10px;}
      .panel {background:#e7e5db;border-radius:22px;box-shadow:0 2px 16px 0 #0b595247;margin-bottom:26px;padding:30px 25px 18px 25px;}
      h2 {color:#158078;font-weight:bold;margin-bottom:14px;font-size:1.38em;border-right:8px solid #158078;padding-right:12px;background:linear-gradient(90deg,#f5f6f7 80%,#158078 100%);display:inline-block;border-radius:0 17px 17px 0;}
      table {width:100%;border-collapse:collapse;margin-bottom:10px;background:#f5f6f7;color:#183c3b;font-size:1.01em;border-radius:14px;overflow:hidden;box-shadow:0 0.5px 6px #15807822;}
      th,td {border:1px dashed #c6a96d;padding:8px 7px;text-align:center;}
      th {background:#158078;color:#fff;font-weight:bold;}
      .footer-signature {color:#9e7e45;background:#e5e1d4;border-radius:0 0 18px 18px;font-size:1.13em;text-align:center;padding:19px 0 13px 0;margin-top:38px;font-weight:bold;border-top:2px solid #c6a96d44;}
      @media print {button#printBtn {display:none !important;}}
    </style>
  </head>
  <body>
    <button id="printBtn" onclick="window.print()" style="position:fixed;top:20px;left:30px;z-index:999;background:#158078;color:#fff;border:none;border-radius:9px;padding:10px 30px;font-size:1.05em;box-shadow:0 1px 4px #0002;font-weight:bold;cursor:pointer;">
      ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    </button>
    <header>
      <h1>ØªÙ‚Ø±ÙŠØ± Ø´Ø§ØºÙ„ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h1>
    </header>
    <div class="container">
      <div class="panel">
        <h2>Ø§Ù„ÙƒØ§Ø¯Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h2>
        ${tbl1}
      </div>
      <div class="panel">
        <h2>ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
        <table>
          <tr><th>Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</th><th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­ØµØµ</th><th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</th><th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th></tr>
          ${reportRows.join('')}
        </table>
      </div>
      <div class="footer-signature">
        ÙÙƒØ±Ø© ÙˆØªØµÙ…ÙŠÙ… Ù…Ø­Ù…Ø¯ Ù…Ø¬Ù…Ù…ÙŠ â€“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025
      </div>
    </div>
  </body>
  </html>`;
  let newWin = window.open("", "", "width=1200,height=800,scrollbars=yes");
  newWin.document.open(); newWin.document.write(html); newWin.document.close();
};
</script>
<script>
// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø© Ù„Ù€ PWA
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
    .then(reg => console.log("Service Worker Registered", reg))
    .catch(err => console.error("Service Worker Error", err));
}
</script>
</body>
</html>
